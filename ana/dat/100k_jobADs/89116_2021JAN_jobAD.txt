"Magento Cron Job - Setup Emails from 1 minute; rest of cron every day? - Magento Stack ExchangeStack Exchange NetworkStack Exchange network consists of 176 Q&A communities including Stack Overflow, the largest, most trusted online community for developers to learn, share their knowledge, and build their careers.Visit Stack ExchangeLoading…0+0Tour Start here for a quick overview of the siteHelp Center Detailed answers to any questions you might haveMeta Discuss the workings and policies of this siteAbout Us Learn more about Stack Overflow the companyBusiness Learn more about hiring developers or posting ads with usLog in Sign upcurrent communityMagentohelp chatMagento Metayour communitiesSign up or log in to customize your list.more stack exchange communitiescompany blogMagento Stack Exchange is a question and answer site for users of the Magento e-Commerce platform. It only takes a minute to sign up.Sign up to join this communityAnybody can ask a questionAnybody can answerThe best answers are voted up and rise to the topHomeQuestionsTagsUsersUnansweredJobsMagento Cron Job - Setup Emails from 1 minute; rest of cron every day?Ask QuestionAsked 5 years, 11 months agoActive 4 years, 11 months agoViewed 15k times52I installed Magento 1.9, and now since the order emails are sent with cron, I want the cron to run every 1 minute, so the customer gets their emails right away.But I do not want all the cron tasks every minute, cause it would be a huge resource drain.How can i set up the order emails to get out every minute, but not the other cron tasks....I also have installed AOE scheduler ?magento-1.9ShareImprove this questionFollowasked Feb 16 '15 at 18:34styzzzstyzzz67622 gold badges99 silver badges2020 bronze badgesset up the cron job to run one minute from deployment and 24.00001 hours henceforth. – easymoden00b Feb 16 '15 at 18:47add a comment |4 Answers 4Active Oldest Votes12We have shops running where the cron script is called every minute and it isn't a problem resource-wise, but this is how you would do it with Aoe_Scheduler by creating separated cron groups:Create a symlink cron_email.php in your Magento root directory which points to cron.php: ln -s cron.php cron_email.phpDefine the normal cronjob for all cron tasks excluding the one sending the mail:*/5 * * * * /usr/bin/env SCHEDULER_BLACKLIST='core_email_queue_send_all' /bin/sh /path/to/magento/cron.shDefine the second cronjob which is only responsible for sending the mail:* * * * * /usr/bin/env SCHEDULER_WHITELIST='core_email_queue_send_all' /bin/sh /path/to/magento/cron.sh cron_email.phpOne advantage you'll get when separating the crons into groups is that long running jobs in the \"normal\" cronjob won't keep your mails from being sent and vice versa.As @fschmengler pointed out in the comment you'll have to be cautious when using symlinks and you are on a non-Windows system with shell_exec enabled. Here is how we actually do it to avoid problems parallel execution when using symlinks:create symlinks with different names pointing to cron.php for every cron groupexplicitly define whether the mode of the cron is always or defaultThe result looks like this:crontab:*/5 * * * * /usr/bin/env SCHEDULER_BLACKLIST='core_email_queue_send_all,long_running_cron' /bin/sh /path/to/magento/cron.sh cron.php -m=default* * * * * /usr/bin/env /bin/sh /path/to/magento/cron.sh cron_always.php -m=always* * * * * /usr/bin/env SCHEDULER_WHITELIST='core_email_queue_send_all' /bin/sh /path/to/magento/cron.sh cron_email.php -m=default* * * * * /usr/bin/env SCHEDULER_WHITELIST='long_running_cron' /bin/sh /path/to/magento/cron.sh cron_longrunning.php -m=defaultMagento root dir:ls -lacron_always.php -> cron.phpcron_email.php -> cron.phpcron_longrunning.php -> cron.phpcron.phpThis makes things a little bit more complicated but it has served us well.ShareImprove this answerFollowedited Feb 17 '15 at 8:37answered Feb 16 '15 at 19:47Matthias ZeisMatthias Zeis7,60733 gold badges2828 silver badges5050 bronze badges1I recommend to copy instead of symlink the file. Or read this issue carefully: github.com/AOEpeople/Aoe_Scheduler/issues/43 – Fabian Schmengler Feb 16 '15 at 20:33I added information on how we avoid parallel execution. – Matthias Zeis Feb 17 '15 at 8:37I completely agree with Matthew in which the cron running every minute is not a significant resource drain on a proper Magento server. – kab8609 Feb 17 '15 at 22:30add a comment |2As you have AOE Scheduler installed you can create a custom cron script (like customcron.php) which you can trigger once a minute.<?phprequire_once 'shell/abstract.php';require 'app/Mage.php';Mage::app('admin')->setUseSessionInUrl(false);class ManualCron extends Mage_Shell_Abstract {    private $_defaultCronJobs = null;    public function __construct() {        parent::__construct();        $collection = Mage::getModel('aoe_scheduler/collection_crons');        $_defaultCronJobs= array();        foreach ($collection->getItems() as $item) {            $data = $item->getData();            $this->_defaultCronJobs[$data['id']] = $data['model'];        }    }    private function _runCron($cronId) {        $cron = explode(\"::\", $this->_defaultCronJobs[$cronId]);        $cronFunction = \"Mage::getModel('\".$cron[0].\"')->\".$cron[1].\"();\";        echo \"RUNNING: \".$cronFunction.PHP_EOL;        eval($cronFunction);    }    private function _runAllCrons() {        foreach ($this->_defaultCronJobs as $key => $value) {            $this->_runCron($key);        }    }    private function _displayAvaliableCronjobs() {        foreach ($this->_defaultCronJobs as $key => $value) {            echo $key.\" -> \".$value.PHP_EOL;        }    }    public function run() {        $command = $this->getArg('command');        if($command) {            switch($command) {                case \"all\":                    $this->_runAllCrons();                    break;                case \"crons\":                    $this->_displayAvaliableCronjobs();                    break;                default:                    if (isset($this->_defaultCronJobs[$command])) {                        $this->_runCron($command);                    } else {                        echo $this->usageHelp();                    }                    break;            } //switch        } else {            echo $this->usageHelp();        }    }    public function usageHelp()    {        return <<<USAGE        Usage:  php manualcron.php --command [option]        [option]        help                        This help        all         Run all cron jobs        crons    Display all the avaliable cron jobs setup        [specific_cron_id]    Run a specific cron, e.g. \"php manualcron.php  command cronjob_name\" USAGE;    }}$shell = new ManualCron();$shell->run();echo PHP_EOL;Then you can configure it like: php shell/manualcron.php –command core_email_queue_send_allSource: ecomus.co.ukShareImprove this answerFollowanswered Feb 16 '15 at 19:46Marcel HauriMarcel Hauri52433 silver badges1414 bronze badgesIts seems that the order emails are by default scheduled every minute, while the rest are for more time....I am ok with this....but all my tasks in aoe scheduler are pending....and the status never executes – styzzz Feb 17 '15 at 3:17add a comment |1Aoe_Scheduler is capable of splitting you crons into different groups so you can run them in parallel or distribute them on multiple servers. Running multiple scheduler jobs in parallel is quite handy when you have some jobs which take a long time to run, and are not crucial for shop to run properly. En example could be a job which generates some kind of reports. Aoe Scheduler comes with whitelist/blacklist feature enabling you to do so.How to make it work: 1. Assign a job to a group. Either from system -> scheduler -> job configuration -> edit form, or from xml configuration:<crontab>        <jobs>             <job_name>                  <run>                    ....                  </run>                   <groups>reporting,other_group_name</groups>             </job_name>        </jobs></crontab>Aoe_Scheduler will merge xml configuration with the one from db.Configure your crontab entry using --includeGroups and --excludeGroups You can find examples in system -> scheduler -> instructionsNote: Aoe_Scheduler has evolved, and @matthias-zeis answer is not correct for newer versions of Aoe_Scheduler. The general idea of having cron groups is still valid, however the configuration should be different now.Instead of using SCHEDULER_BLACKLIST and SCHEDULER_WHITELIST you should use configuration explained above.ShareImprove this answerFollowedited Feb 23 '16 at 13:19Rohit Kundale3,32211 gold badge1717 silver badges2828 bronze badgesanswered Feb 23 '16 at 12:31Tymoteusz MotylewskiTymoteusz Motylewski15144 bronze badgesadd a comment |-1I found an answer all: in Magento's cron, automatically emails are sent every minutes. Thats what the schedules are for: Magento schedules emails to go out every minute.My problem was my host was horrible at telling me how to effectively call the cron to work, and thats why the cron was not working. If you are working with BLUEHOST, and want the Magento 1.9 cron to work, you have to enter it on the server side as:*/5 * * * * wget -O /dev/null -q http://www.YOURDOMAIN.com/[path to magento]cron.php > /dev/nullShareImprove this answerFollowanswered Feb 17 '15 at 22:27styzzzstyzzz67622 gold badges99 silver badges2020 bronze badges2that is actually not the best solution, as you then have the problem to be limited via timeout and max memory which usually is set very low for frontend requests. If you have wget, why cant you instead call it with php /path/to/cron.php ? – Flyingmana Feb 17 '15 at 23:22Yeah I am not sure...I have tried calling with php but it doesn't work...same path and everything.... – styzzz Feb 18 '15 at 4:21using wget to call cron.php is not a good idea, the issues you are having is probably related to the cron not running as a user with proper permissions – Shapeshifter Nov 28 '16 at 15:58add a comment |Your AnswerThanks for contributing an answer to Magento Stack Exchange!Please be sure to answer the question. Provide details and share your research!But avoid …Asking for help, clarification, or responding to other answers.Making statements based on opinion; back them up with references or personal experience.To learn more, see our tips on writing great answers.Draft savedDraft discardedSign up or log inSign up using GoogleSign up using FacebookSign up using Email and PasswordSubmitPost as a guestNameEmailRequired, but never shownPost as a guestNameEmailRequired, but never shownPost Your AnswerDiscardBy clicking “Post Your Answer”, you agree to our terms of service, privacy policy and cookie policyNot the answer you're looking for? Browse other questions tagged magento-1.9 or ask your own question.The Overflow BlogFulfilling the promise of CI/CDPodcast 305: What does it mean to be a “senior” software engineerLinked3Cron job settingsRelated3Magento 1.9.1 Order emails not sent - cron checked - stuck in core_email_queue3AOE Scheduler on 1.9.1.11Cron job script is running, but Magento order confirmation emails are not sending2Order emails not sending, magento 1.9.2.2, Cron heartbeat task error2Magento 1.9.2.1 Cron not working for Order confirmation emails1CRON Jobs for order emails0Cron Job In MagentoHot Network QuestionsHow can I use Mathematica to solve a complex truth-teller/liar logic problem?Check windows update file integrityIs it safe to keep uranium ore in my house?Sequence of tending to zero functions that majorizes any other tending to zero functionFor which elements should I include spin orbit coupling in Quantum ESPRESSO?If I am blending parsley for soup, can I use the parsley whole or should I still remove the stems?Maximum useful resolution for scanning 35mm filmDo all fundamental frequencies have 1 anti-node and 2 nodesHow to make sure that a conference is not a scam when you are invited as a speaker?How to describe a cloak touching the ground behind you as you walk?What is the simplest proof that the density of primes goes to zero?Didn't you ask me for a crossword?Senior wants me gone, one way or anotherWhy did flying boats in the '30s and '40s have a longer range than land based aircraft?What language(s) implements function return value by assigning to the function nameBetter user experience while having a small amount of content to showSkyscrapers in Sudoku!!! - SS#101 Corinthians 3:15 What does \"escaping through the flames\" convey?What is congruence in lambda-calculusAt whose expense is the stage of preparing a contract performed?How would a theoretically perfect language work?The physics of flying archersInstalling from adb installs app for all userswhy is user 'nobody' listed as a user on my iMAC?more hot questionsQuestion feedSubscribe to RSSQuestion feedTo subscribe to this RSS feed, copy and paste this URL into your RSS reader.defaultMagentoTourHelpChatContactFeedbackMobileCompanyStack OverflowFor TeamsAdvertise With UsHire a DeveloperDeveloper JobsAboutPressLegalPrivacy PolicyTerms of ServiceStack ExchangeNetworkTechnologyLife / ArtsCulture / RecreationScienceOtherStack OverflowServer FaultSuper UserWeb ApplicationsAsk UbuntuWebmastersGame DevelopmentTeX - LaTeXSoftware EngineeringUnix & LinuxAsk Different (Apple)WordPress DevelopmentGeographic Information SystemsElectrical EngineeringAndroid EnthusiastsInformation SecurityDatabase AdministratorsDrupal AnswersSharePointUser ExperienceMathematicaSalesforceExpressionEngine® AnswersStack Overflow em PortuguêsBlenderNetwork EngineeringCryptographyCode ReviewMagentoSoftware RecommendationsSignal ProcessingEmacsRaspberry PiStack Overflow на русскомCode GolfStack Overflow en españolEthereumData ScienceArduinoBitcoinSoftware Quality Assurance & TestingSound DesignWindows Phonemore (28)PhotographyScience Fiction & FantasyGraphic DesignMovies & TVMusic: Practice & TheoryWorldbuildingVideo ProductionSeasoned Advice (cooking)Home ImprovementPersonal Finance & MoneyAcademiaLawPhysical FitnessGardening & LandscapingParentingmore (10)English Language & UsageSkepticsMi Yodeya (Judaism)TravelChristianityEnglish Language LearnersJapanese LanguageChinese LanguageFrench LanguageGerman LanguageBiblical HermeneuticsHistorySpanish LanguageIslamРусский языкRussian LanguageArqade (gaming)BicyclesRole-playing GamesAnime & MangaPuzzlingMotor Vehicle Maintenance & RepairBoard & Card GamesBricksHomebrewingMartial ArtsThe Great OutdoorsPokerChessSportsmore (16)MathOverflowMathematicsCross Validated (stats)Theoretical Computer SciencePhysicsChemistryBiologyComputer SciencePhilosophyLinguisticsPsychology & NeuroscienceComputational Sciencemore (10)Meta Stack ExchangeStack AppsAPIDataBlogFacebookTwitterLinkedInInstagramsite design / logo © 2021 Stack Exchange Inc; user contributions licensed under cc by-sa. rev 2021.1.18.38333Magento Stack Exchange works best with JavaScript enabled"
