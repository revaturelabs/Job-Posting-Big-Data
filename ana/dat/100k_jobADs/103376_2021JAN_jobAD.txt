"Club GLOBALS - GLOBALS Business Development Executive (EN+DE) Freelancer in Berlin'+suggestedActions+''); //	$(element.children[0].children[0].children[0]).append(''+suggestedActions+''); //	$(element.parentElement.parentElement.parentElement).append(''+onBoardingContent+''); $(element.children[0].children[0]).append(''+onBoardingContent+''+suggestedActions	); //	sentences=[]; //	sentences[0]=\"Hello there! \"; //	sentences[1]=\"I am \"+ziaChatBotData.botName+\", \"+ziaChatBotData.companyName+\"'s AI assistant.\"//no i18n if(zia.isOnboardingHookCalledForFirstTime){ var chatPop = $(\"zia-chat-bot .ziaChatPop\"); chatPop.addClass('zrc-ziachatpop'); $(\".askziaTit\").text(ziaChatBotData['BOT_NAME']);//no i18n //$(\".askziaTit\").after(\"\"); $(\".zia_icons_zia_chatHeader\").append(\"\"); //$(\".chat-popup-onboarding\").prepend(''); $(\".chat-popup-onboarding\").prepend(\"\"); var onboardingButtonHTML = \"\"; var listOfOnBoardingButtons = $(\".ziaonboardinggetstartedbutton\"); listOfOnBoardingButtons.each(function(onboardingButtonIndex, onBoardingButton) { onboardingButtonHTML+=onBoardingButton.outerHTML; }); var modifiedOnboardingHTML = \"\"+onboardingButtonHTML+\"\"; var onboardingButtonsParent = $(listOfOnBoardingButtons[0].parentElement); $(listOfOnBoardingButtons).remove(); onboardingButtonsParent.append(modifiedOnboardingHTML); $(\"#invocationSentences\").append(''); $(\"#invocationSentences\").click(function(event){ var mainMenuElement = $(\".zia-main-menu\"); if(mainMenuElement.hasClass('open')){ mainMenuElement.removeClass('open'); $(\".ziaChatPop_invocationSentenceWrapper\").css('display','none');//no i18n } else{ mainMenuElement.addClass('open'); $(\".ziaChatPop_invocationSentenceWrapper\").css('display','block');//no i18n } }); $(\"#input_cancelled_wrapper\").click(function(event){ $(\"#cb-privacy-consent-list\").remove(); $(\"#cb-privacy-consent-buttons\").remove(); var chatbotTtypeBox = $(\"#ziaComp_message_box\"); chatbotTtypeBox.prop('disabled',false);//no i18n }); $(\".ziaonboardinggetstartedbutton\").click(function(event){ var mainMenuElement = $(\".zia-main-menu\"); if(mainMenuElement.hasClass('open')){ mainMenuElement.removeClass('open'); } else{ mainMenuElement.addClass('open'); } }); $(\".ziaComp_textareaWrapper_before\").click(function(event){ $(\"#ziaComp_message_box\").focus(); }); $('.askziaheading').attr('onclick', '');//no i18n zia.isOnboardingHookCalledForFirstTime = false; } } zia.getClientSessionData=function(){ return zia.getClientSessionDataAsPromise(); } /* zia.getClientSessionData = function(){ //	var clientSessionData = {\"isNewCareerSite\":true,\"domain\":\"priyacorp.localzohorecruit.com\",\"pageid\":\"7339000006214027\",\"page_name\":\"Careers\",\"candidatelogin\":\"50cbfc892e65f131636d248ade67a2ae6f16e4c23df4f2feab70d237853e29121e1c09925f2a3c566d4b0acd9c05aef5\"} var clientSessionData = {\"isNewCareerSite\":true,\"domain\":\"priyacorp.localzohorecruit.com\",\"pageid\":\"7339000006214027\",\"page_name\":\"Careers\",\"candidatelogin\":\"\"} return clientSessionData; } */ zia.getClientSessionDataAsJson=function(){ var customSessionData = {}; var zrMainContainer = $(zia.dataContainer); if(isOldCareerSite){ customSessionData.isNewCareerSite = false; customSessionData.digest = zrMainContainer.data(\"digest\");//no i18n /* if(ziaChatBotData['CANDIDATE_LOGIN_SESSION']!=null){ customSessionData.candidatelogin = zrMainContainer.data(\"candidateloginsession\");//no i18n } */ } else{ customSessionData.isNewCareerSite = true; customSessionData.domain = document.location.hostname; customSessionData.pageid = meta.page_id; customSessionData.page_name = meta.page_name; getCandidateLoginSession(); /* if(meta.register_info != null && meta.register_info.candidate_portal != null && meta.register_info.candidate_portal !=\"\"){ var candLoginSessionResp = $.ajax({ url: \"/recruit/v2/chat-bot/cand-login-session\", //no i18n type: 'POST',//no i18n async: false, timeout: 30000 }); customSessionData.candidatelogin = candLoginSessionResp.responseJSON.candidateloginsession; } */ } customSessionData.candidatelogin = ziaChatBotData['CANDIDATE_LOGIN_SESSION']; return customSessionData; } zia.getClientSessionDataAsPromise=function(){ if(isOldCareerSite){ var customSessionData = {}; var zrMainContainer = $(zia.dataContainer); customSessionData.isNewCareerSite = false; customSessionData.digest = zrMainContainer.data(\"digest\");//no i18n /* if(ziaChatBotData['CANDIDATE_LOGIN_SESSION']!=null){ customSessionData.candidatelogin = zrMainContainer.data(\"candidateloginsession\");//no i18n } */ customSessionData.candidatelogin = ziaChatBotData['CANDIDATE_LOGIN_SESSION']; return customSessionData; } else{ var request = new Promise(function(resolve, reject) { $.ajax({ url: \"/recruit/v2/chat-bot/cand-login-session\", //no i18n type: 'GET',//no i18n async: false, timeout: 30000, success: function(response){ var customSessionData = {}; customSessionData.isNewCareerSite = true; customSessionData.domain = document.location.hostname; customSessionData.pageid = meta.page_id; customSessionData.page_name = meta.page_name; var candidateloginsession = response['chat-bots'][0].details.candidateloginsession; ziaChatBotData['CANDIDATE_LOGIN_SESSION'] = candidateloginsession==\"\" ? null : candidateloginsession; customSessionData.candidatelogin = ziaChatBotData['CANDIDATE_LOGIN_SESSION']; resolve(customSessionData); } })	}) return request; } } zia.handleUpload=function(uploadObject){ if(resumeSupportedContentTypes.includes(uploadObject.file.type)){ var formData = new FormData(); formData.append(\"resume\", uploadObject.file);//no i18n var zrMainContainer = $(zia.dataContainer); var paramJSON = {}; paramJSON['is_old_careersite']=isOldCareerSite; //formData.append(\"isOldCareerSite\",isOldCareerSite);//no i18n if(isOldCareerSite){ paramJSON['digest']=zrMainContainer.data(\"digest\");//no i18n //formData.append(\"digest\",zrMainContainer.data(\"digest\"));//no i18n } else{ paramJSON['domain']=document.location.hostname; paramJSON['pageid']=meta.page_id; //formData.append(\"domain\",document.location.hostname);//no i18n //formData.append(\"pageid\", meta.page_id);//no i18n } formData.append('careersite_details',JSON.stringify(paramJSON));//no i18n var xhr = new XMLHttpRequest(); uploadObject.updateProgress(100); xhr.upload.onprogress = function (e) { if (e.lengthComputable) { uploadObject.updateProgress((e.loaded/e.total)*100); } } xhr.onloadend = function (e) { uploadObject.updateProgress(100); var responseObj = JSON.parse(e.target.responseText); if(responseObj.status==\"error\"){ if(responseObj.code==\"INVALID_DATA\"){ uploadObject.onFailure(I18n.getMsg('zr.zia.cb.upload.file.invalid.type')); } else if(responseObj.code==\"FILE_SIZE_MORE_THAN_ALLOWED_SIZE\"){ uploadObject.onFailure(I18n.getMsg('zr.zia.cb.upload.file.size.exceeded')); } } else{ uploadObject.uploadComplete(responseObj['chat-bots'][0].details.id); } } xhr.open(\"POST\",\"/recruit/v2/chat-bot/resume\"); xhr.withCredentials = true; xhr.send(formData); } else{ uploadObject.onFailure(I18n.getMsg('zr.zia.cb.upload.file.invalid.type')); } } zia.handlePrompt = function(functionName,data,element,responseHandled,fromHistory,fromPagination,param){ if(data.signupCandidatePortalSimple){ //not in use element.innerHTML=\"\"+Utils.encodeHTML(data.message)+\"\"; $(element.parentElement.parentElement).removeClass(\"noPaddingBotTxt\"); if(data.firstTime){ RegisterCandidate.getRegisterForm(); } data.firstTime = false; return false; } else if(data.htmlContent && data.firstTime){ //not in use data.firstTime = false; var actualElementId = element.id; element.id=\"firstMsg\"; element.innerHTML=\"\"+Utils.encodeHTML(data.firstMessage)+\"\"; var firstElementDiv = document.createElement(\"div\"); firstElementDiv.innerHTML= element.parentElement.parentElement.innerHTML; element.parentElement.parentElement.parentElement.appendChild(firstElementDiv); element.id=actualElementId; element.innerHTML=data.htmlContent; var formFieldChildHTML= element.parentElement.parentElement.parentElement.children[1].innerHTML; var firstMsgChildHTML = element.parentElement.parentElement.parentElement.children[2].innerHTML; element.parentElement.parentElement.parentElement.children[2].innerHTML=formFieldChildHTML; element.parentElement.parentElement.parentElement.children[1].innerHTML=firstMsgChildHTML; return false; } else if(false && data.signupCandidatePortalSectionWise && data.firstTime){ //not in use /* element.innerHTML=\"\"+data.message+\"\"; $(element.parentElement.parentElement).removeClass(\"noPaddingBotTxt\"); if(data.firstTime){ portalFormElementIdInCB = \"#\"+element.id; RegisterCandidate.getRegisterForm(); } data.firstTime = false; */ /* if(data.firstTime){ data.firstTime = false; var actualElementId = element.id; element.id=element.id+\"_firstMsg\"; element.innerHTML=\"\"+data.message+\"\"; $(element.parentElement.parentElement).removeClass(\"noPaddingBotTxt\"); var firstElementDiv = document.createElement(\"div\"); firstElementDiv.classList.add(\"botSentText\");//no i18n firstElementDiv.classList.add(\"noPaddingBotTxt\");//no i18n firstElementDiv.style.marginTop=\"15px\";//no i18n firstElementDiv.innerHTML= element.parentElement.parentElement.innerHTML; element.parentElement.parentElement.parentElement.appendChild(firstElementDiv); element.id=actualElementId; portalFormElementIdInCB = \"#\"+element.id+\"_loadForm\"; element.innerHTML=''; var formFieldChildHTML= element.parentElement.parentElement.parentElement.children[1].innerHTML; var firstMsgChildHTML = element.parentElement.parentElement.parentElement.children[2].innerHTML; element.parentElement.parentElement.parentElement.children[2].innerHTML=formFieldChildHTML; element.parentElement.parentElement.parentElement.children[1].innerHTML=firstMsgChildHTML; //document.getElementById(actualElementId+\"_firstMsg\").id=actualElementId; RegisterCandidate.getRegisterForm(null, null, data); return false; } else if($(portalFormElementIdInCB)[0]===undefined){ return false; } else{ return true; } */ data.firstTime = false; var actualElementId = element.id; element.id=\"firstMsg\"; element.innerHTML=\"\"+Utils.encodeHTML(data.message)+\"\"; var firstElementDiv = document.createElement(\"div\"); firstElementDiv.classList.add(\"botSentText\");//no i18n firstElementDiv.classList.add(\"noPaddingBotTxt\");//no i18n firstElementDiv.style.marginTop=\"15px\";//no i18n firstElementDiv.innerHTML= element.parentElement.parentElement.innerHTML; element.parentElement.parentElement.parentElement.appendChild(firstElementDiv); element.id=actualElementId; var portalSingupFormSelector = \"#\"+Utils.encodeJS(data.uniqueId)+\"_loadForm\"; data.portalSingupFormSelector = portalSingupFormSelector; data.htmlContent = ''; element.innerHTML=data.htmlContent; var formFieldChildHTML= element.parentElement.parentElement.parentElement.children[1].innerHTML; var firstMsgChildHTML = element.parentElement.parentElement.parentElement.children[2].innerHTML; element.parentElement.parentElement.parentElement.children[2].innerHTML=formFieldChildHTML; element.parentElement.parentElement.parentElement.children[1].innerHTML=firstMsgChildHTML; RegisterCandidate.getRegisterForm(null, null, data); return false; } else if(data.signupCandidatePortalSectionWise){ if(data.firstTime){ data.firstTime = false; var actualElementId = element.id; //element.id=\"firstMsg\"; element.innerHTML=\"\"+Utils.encodeHTML(data.message)+\"\"; var firstElementDiv = document.createElement(\"div\"); firstElementDiv.classList.add(\"botSentText\");//no i18n firstElementDiv.classList.add(\"noPaddingBotTxt\");//no i18n firstElementDiv.style.marginTop=\"15px\";//no i18n //firstElementDiv.style.backgroundColor=\"\"; //firstElementDiv.style.setProperty(\"background-color\", \"#fff\", \"important\");//no i18n //firstElementDiv.style.width=\"calc(100% - 60px)\"; firstElementDiv.innerHTML= element.parentElement.parentElement.innerHTML; element.parentElement.parentElement.parentElement.appendChild(firstElementDiv); //element.id=actualElementId; element.id=Utils.encodeJS(data.uniqueId)+\"_loadForm_1\"; //	element.parentElement.style.width=\"100%\"; var portalSingupFormSelector = \"#\"+Utils.encodeJS(data.uniqueId)+\"_loadForm\"; data.portalSingupFormSelector = portalSingupFormSelector; data.htmlContent = ''; element.innerHTML=data.htmlContent; var formFieldChildHTML= element.parentElement.parentElement.parentElement.children[1].innerHTML; var firstMsgChildHTML = element.parentElement.parentElement.parentElement.children[2].innerHTML; element.parentElement.parentElement.parentElement.children[2].innerHTML=formFieldChildHTML; element.parentElement.parentElement.parentElement.children[1].innerHTML=firstMsgChildHTML; RegisterCandidate.getRegisterForm(null, null, data); setTimeout(function(portalSingupFormSelector) { $(portalSingupFormSelector).parent().parent().parent().addClass('zia-bot-p0').addClass('zia-form-wrap'); $(portalSingupFormSelector).parent().parent().addClass('max-inherit'); }, 100, portalSingupFormSelector); return false; } else{ var formElenent = $(data.portalSingupFormSelector)[0]; if(formElenent!==undefined){ formElenent.parentElement.parentElement.parentElement.remove(); } return false; } } else if(data.getChatbotPrivacyConsent){ if(data.firstTime){ data.firstTime = false; Lyte.Component.render(\"chatbot-privacy-consent\",data,\"#\"+element.id); setTimeout(function() { $(\"#\"+element.id).parent().parent().addClass('ziamatching-jobs'); $(\"#\"+element.id).parent().removeAttr('style'); }, 300); } return false; } return true; } zia.loadingChatBotForFirstTime = true; zia.fromFooter = function(pushCallBack) { var elt = $('#ziaChatbotDiv'); $(\"#clientSuggestionsContainer\").css('display','block'); //no i18n $(\"body\").addClass('zia-body-hidden'); /* if(zia.loadingChatBotForFirstTime){ //	document.getElementById(\"invocationSentences\").click(); zia.loadingChatBotForFirstTime = false; } */ /* var totalMessages = $(\"div[class*='message_']\").length; if(totalMessages==1 && zia.loadingChatBotForFirstTime==false){ var suggContainer = document.getElementById(\"clientSuggestionsContainer\"); var suggestionsDiv = $(suggContainer.firstElementChild); document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); var newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 7; suggestionsDiv.css({'top':newTop+\"px\", 'margin-left':'50px !important'});//no i18n var firstSuggestionSpan = $(suggestionsDiv.children()[0]); firstSuggestionSpan.css({'display':'table'});///no i18n var secondSuggestionSpan = $(suggestionsDiv.children()[1]); secondSuggestionSpan.css({'margin-top':'3px'});//no i18n document.getElementsByTagName(\"zia-chat-bot\")[0].component.reAlignSuggestions = zia.customReAlignSuggestions; } */ var freezeElement = document.createElement(\"div\"); freezeElement.classList.add('zb-freezelayer');//no i18n $(\"body\").append(freezeElement); $( \".zb-freezelayer\" ).click(function() { zia.minimizeChat(); }); setTimeout(function(){ elt.css({ 'bottom': '70px', //No I18N 'visibility' : 'visible' //no i18n }); if(pushCallBack){ pushCallBack(); } document.getElementsByTagName(\"zia-chat-bot\")[0].component.reAlignSuggestions(void 0, \"clientSuggestions\", void 0);//no i18n document.getElementsByTagName(\"zia-chat-bot\")[0].component.reAlignSuggestions(void 0, \"suggestions\", void 0);//no i18n document.getElementById(\"ziaComp_message_box\").placeholder=\"Type your message and hit Enter...\";//no i18n $(\".zrc-ziamessage-box\").css('display','none');//no i18n $(\"#ziaChatBot\").css('display','none');//no i18n if(zia.loadingChatBotForFirstTime){ ziaskills.pushTranscript({ // message: \"Hello there! I am \"+ ziaChatBotData['BOT_NAME'] +\". \"+ziaChatBotData['WELCOME_MESSAGE'],//no i18n message: ziaChatBotData['WELCOME_MESSAGE'],//no i18n id: Date.now().toString(), sender: \"zia\",//no i18n status: \"action_completion\",//no i18n display: !1, show: !0, time: Date.now().toString() }); // $(\".zia_paragraph\").text(ziaChatBotData['WELCOME_MESSAGE']);//no i18n //document.getElementById(\"invocationSentences\").click(); zia.loadingChatBotForFirstTime = false; var messageElementsDiv = $(\".home-page-body-pseudo > .zvoice-row\"); messageElementsDiv.css('vertical-align','bottom');//no i18n messageElementsDiv.css('display','table-cell');//no i18n messageElementsDiv.css('height',$(\".home-page-body-pseudo\").height()+\"px\");//no i18n /* var suggContainer = document.getElementById(\"clientSuggestionsContainer\"); var suggestionsDiv = $(suggContainer.firstElementChild); document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); var newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 7; suggestionsDiv.css({'top':newTop+\"px\", 'margin-left':'50px !important'});//no i18n var firstSuggestionSpan = $(suggestionsDiv.children()[0]); firstSuggestionSpan.css({'display':'table'});///no i18n var secondSuggestionSpan = $(suggestionsDiv.children()[1]); secondSuggestionSpan.css({'margin-top':'3px'});//no i18n document.getElementsByTagName(\"zia-chat-bot\")[0].component.reAlignSuggestions = zia.customReAlignSuggestions; */ //realign suggestions when shutdown button is visible botOriginalShowDownFunction = document.getElementsByTagName(\"zia-chat-bot\")[0].component.showShutdownbtn; document.getElementsByTagName(\"zia-chat-bot\")[0].component.showShutdownbtn = function() { botOriginalShowDownFunction(); setTimeout(function(){ document.getElementsByTagName(\"zia-chat-bot\")[0].component.reAlignSuggestions(void 0, \"clientSuggestions\", void 0);//no i18n document.getElementsByTagName(\"zia-chat-bot\")[0].component.reAlignSuggestions(void 0, \"suggestions\", void 0);//no i18n },10); } if(ziaChatBotData['TRIGGER_TYPE']==\"1\" && !zia.isBotOpeningAutomatically){ $(\"#ziaChatbotDiv\").removeClass('zia-default-minheight'); $(\"#ziaChatbotDiv\").addClass('zia-actual-height'); } zia.isBotOpeningAutomatically = false; } },100); }, zia.customReAlignSuggestions = function(t, e, a) { var totalMessages = $(\"div[class*='message_']\").length; var returnNotZero = false; if(totalMessages!=1){ // zia skills code starts if (!t) t = document.getElementsByClassName(\"home-page-body-pseudo\")[0]; if (a) var i = a.getBoundingClientRect().height; var n = document.getElementsByTagName(\"zia-chat-bot\")[0].component.getData(\"chatMode\") //no i18n , o = document.getElementsByTagName(\"zia-chat-bot\")[0].component.getData(\"actionNamespace\")//no i18n , s = document.getElementsByTagName(\"zia-chat-bot\")[0].component.getData(\"actionId\")//no i18n , p = document.getElementsByTagName(\"zia-chat-bot\")[0].component.getData(\"skillName\");//no i18n if (\"popup\" == n) { var r = document.getElementsByClassName(\"home-page-footer\")[0]; if (\"suggestions\" == e) var l = document.querySelector(\"#suggestionsContainer .botSentContainer\");//no i18n else l = document.querySelector(\"#clientSuggestionsContainer .botSentContainer\")//no i18n } else { r = document.querySelector(\".home-page-footer lyte-table\"),//no i18n l = document.getElementsByClassName(\"chat-suggestion-row\")[0]; if (o || s || p) { var d = document.getElementsByClassName(\"ziaComp-flip-card-inner\")[0]; d && (d.style.transformStyle = \"inherit\")//no i18n } } if (l) { var c = r.getBoundingClientRect(); l.getBoundingClientRect(); l.style.width = c.width + \"px\"; var m = l.getBoundingClientRect().height + (i || 0); l.style.left = c.left + \"px\"; l.style.top = c.top - m - 10 + \"px\"; t.style.height = \"calc(100% - \" + (m + 10) + \"px)\"; var returnNotZero = true; } // zia skills code ends var suggContainer = document.getElementById(\"clientSuggestionsContainer\"); var isVerticalAlign = false; if(suggContainer!=undefined){ var suggestionsDiv = $(suggContainer.firstElementChild); if(suggestionsDiv!=undefined){ var firstSuggestionSpan = $(suggestionsDiv.children()[0]); if(firstSuggestionSpan!=undefined){ if(zia.vertialAlignSugg.contains(firstSuggestionSpan.text().trim())){ isVerticalAlign = true; } } } } /* if(isVerticalAlign){ document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); var newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 7; suggestionsDiv.css({'top':newTop+\"px\", 'margin-left':'50px !important'});//no i18n firstSuggestionSpan.css({'display':'table'});///no i18n var secondSuggestionSpan = $(suggestionsDiv.children()[1]); secondSuggestionSpan.css({'margin-top':'3px'});//no i18n } */ } else{ var suggContainer = document.getElementById(\"clientSuggestionsContainer\"); var suggestionsDiv = $(suggContainer.firstElementChild); suggestionsDiv.css({'margin-left':'50px !important'});//no i18n var firstSuggestionSpan = $(suggestionsDiv.children()[0]); firstSuggestionSpan.css({'display':'table'});///no i18n var secondSuggestionSpan = $(suggestionsDiv.children()[1]); secondSuggestionSpan.css({'margin-top':'3px'});//no i18n } var suggContainer = document.getElementById(\"clientSuggestionsContainer\"); if(suggContainer==undefined){ suggContainer = document.getElementById(\"suggestionsContainer\"); } if(suggContainer!=undefined){ var suggestionsDiv = $(suggContainer.firstElementChild); if(suggestionsDiv!=undefined){ document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); var newTop; if($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top==0){ //	newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 15; newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()); newTop = Math.round(newTop*1.05); } else{ //	newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).height()) + 15; newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).height()); newTop = Math.round(newTop*1.05); } //newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 15; newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()); newTop = Math.round(newTop*1.01); /* if($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top==0){ newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 7; } else{ newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top); } */ suggestionsDiv.css({'top':newTop+\"px\", 'margin-left':'50px !important'});//no i18n } } setTimeout(function() { var suggContainer = document.getElementById(\"clientSuggestionsContainer\"); if(suggContainer==undefined){ suggContainer = document.getElementById(\"suggestionsContainer\"); } if(suggContainer!=undefined){ var suggestionsDiv = $(suggContainer.firstElementChild); if(suggestionsDiv!=undefined){ document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); var newTop; if($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top==0){ newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 15; } else{ newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).height()) + 15; } //newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 15; newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 15; newTop = Math.round(newTop*1.01); /* if($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top==0){ newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).offset().top + $($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[0]).height()) + 7; } else{ newTop = Math.round($($(\"zia-chat-bot .ziaChatPop .botSentContainer.lastChild\")[1]).offset().top); } */ suggestionsDiv.css({'top':newTop+\"px\", 'margin-left':'50px !important'});//no i18n } } }, 5); if(returnNotZero){ return !0; } return !1 }, zia.toFooter = function(elt) { var elt = $('#ziaChatbotDiv'); var eltOH = elt.outerHeight(); $(\"#clientSuggestionsContainer\").css('display','none'); //no i18n $(\"body\").removeClass('zia-body-hidden'); elt.css({ 'bottom': '-' + eltOH + 'px' //No I18N }); elt.bind(\"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend\", function() { var eltinner =$('#ziaChatbotDiv'); eltinner.css(\"visibility\", \"hidden\");//No I18N eltinner.off(\"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend\"); //No I18N }); $(\"#ziaChatbotDiv\").removeClass('zia-default-minheight'); $(\"#ziaChatbotDiv\").addClass('zia-actual-height'); $(\".zrc-ziamessage-box\").css('display','block'); //No I18N $(\"#ziaChatBot\").css('display','block'); //No I18N $(\".zb-freezelayer\").remove(); }, zia.copyContactPhToClipBoard = function(){ var phElement = document.getElementById('cb-contact-ph'); var range = document.createRange(); range.selectNode(phElement); window.getSelection().removeAllRanges(); // clear current selection window.getSelection().addRange(range); // to select text document.execCommand(\"copy\");//no i18n window.getSelection().removeAllRanges();// to deselect $(\"#cb-contact-ph-copied\").css('display','block');//no i18n $(\"#cb-contact-ph-copy-to-clip\").css('display','none');//no i18n setTimeout(function() { $(\"#cb-contact-ph-copied\").css('display','none');//no i18n $(\"#cb-contact-ph-copy-to-clip\").css('display','block');//no i18n }, 3000); }, zia.handleResponse=function(functionName,data,element,responseHandled,fromHistory,fromPagination){ //do whatever you want to with the data and set it to the element which will appear in the chat area if(data['secondMessage']){ if(data['followup_suggestions']){ setTimeout(function() { ziaskills.pushTranscript({ message: data['secondMessage'],//no i18n id: Date.now().toString(), sender: \"zia\",//no i18n status: \"action_completion\",//no i18n display: !1, show: !0, time: Date.now().toString(), followup_suggestions: data['followup_suggestions'] }); }, 300); } else{ setTimeout(function() { ziaskills.pushTranscript({ message: data['secondMessage'],//no i18n id: Date.now().toString(), sender: \"zia\",//no i18n status: \"action_completion\",//no i18n display: !1, show: !0, time: Date.now().toString() }); }, 300); } } if(data['disableActionSuggestionsAndReturn']){ setTimeout(function() { document.getElementsByTagName(\"zia-chat-bot\")[0].component.data.showActionSuggestions=false; }, 10000); return true; } if(data['signupCandidatePortalSimple']){ RegisterCandidate.getRegisterForm(); return true; } if(data['showContactDetails']){ $(\"#\"+element.id).html(''+ ''+ ''+ 'You can reach us at..'+//no i18n ''+ ''+ ( data['phone']!=undefined ? ''+ ''+ Utils.encodeHTML(data['phone'])+ ''+ ''+ ''+ ''+ 'Copied'+ //no i18n ''+ '' : '' )+ ( data['mail']!=undefined ? ''+ ''+ Utils.encodeHTML(data['mail'])+ ''+ '' : '' )+ ( data['website']!=undefined ? data['website'].startsWith(\"https://\") || data['website'].startsWith(\"http://\") ? //no i18n ''+ ''+Utils.encodeHTML(data['website'])+ ''+ '' : ''+ ''+Utils.encodeHTML(data['website'])+ ''+ '' : '' )+ ''+ ''); return false; } if(data['showAnswerForScoldWithContactDetails']){ $(\"#\"+element.id).html(''+ ''+ ''+ ''+Utils.encodeHTML(data['topMessage'])+''+//no i18n ''+ ''+ ( data['phone']!=undefined ? ''+ ''+ Utils.encodeHTML(data['phone'])+ ''+ ''+ ''+ ''+ 'Copied'+ //no i18n ''+ '' : '' )+ ( data['mail']!=undefined ? ''+ ''+ Utils.encodeHTML(data['mail'])+ ''+ '' : '' )+ ( data['website']!=undefined ? ''+ ''+Utils.encodeHTML(data['website'])+ ''+ '' : '' )+ ''+ ''); return false; } if(data['renderType']==\"zia-cb-match-job-list\"){ document.getElementsByTagName(\"zia-chat-bot\")[0].component.data.showActionSuggestions=false; Lyte.Component.render(\"zia-cb-match-job-list\",data,\"#\"+element.id); setTimeout(function() { $(\"#\"+element.id).parent().parent().addClass('ziamatching-jobs'); }, 300); return false; } return true; } zia.isBotOpeningAutomatically = false; zia.customTrigger = function(){ if(ziaChatBotData['TRIGGER_TYPE']==\"1\"){ var triggerWaitTime = parseInt(ziaChatBotData['TRIGGER_TIME']); if(ziaChatBotData['TRIGGER_TIME_UNIT']==\"Minutes\"){ triggerWaitTime = triggerWaitTime * 60; } setTimeout(function() { if(zia.loadingChatBotForFirstTime){ $(\"#ziaChatbotDiv\").css('visibility','hidden');//no i18n zia.isBotOpeningAutomatically = true; $(\"#ziaChatBot\").trigger('click');//no i18n setTimeout(function() { $(\"#ziaChatbotDiv\").addClass('zia-default-minheight'); $(\"#ziaChatbotDiv\").css('visibility','visible');//no i18n document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); setTimeout(function() { document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); }, 100); setTimeout(function() { document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); }, 200); setTimeout(function() { document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); }, 300); setTimeout(function() { document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); }, 400); setTimeout(function() { document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); }, 500); $(\".zrc-ziachatpop#ziaChatbotDiv.zia-default-minheight\").click(function(event){ if($(\".zrc-ziachatpop#ziaChatbotDiv.zia-default-minheight\").length!=0){ $(\"#ziaChatbotDiv\").removeClass('zia-default-minheight'); $(\"#ziaChatbotDiv\").addClass('zia-actual-height'); event.stopPropagation(); } }); $(\".zrc-ziachatpop#ziaChatbotDiv.zia-default-minheight #ziaComp_message_box\").keydown(function(event){ if($(\".zrc-ziachatpop#ziaChatbotDiv.zia-default-minheight\").length!=0){ $(\"#ziaChatbotDiv\").removeClass('zia-default-minheight'); $(\"#ziaChatbotDiv\").addClass('zia-actual-height'); event.stopPropagation(); } }) }, 100); //	$(\"#ziaChatBot\").trigger('click');//no i18n //	zia.loadingChatBotForFirstTime=false; } }, triggerWaitTime*1000); } else{ $(\"#ziaChatbotDiv\").addClass('zia-actual-height'); } } zia.didConnect=function(){ zia.customTrigger(); } zia.validateFormFieldsAndSubmit = function(tgt){ var formFieldValues = {}; var inputElements = $('input[data-uniqueid=\"userinput-'+tgt.dataset.uniqueid+'\"]') for(var i=0; i< inputElements.length; i++){ var inputElement = inputElements[i]; formFieldValues[inputElement.dataset.paramname]= inputElement.value; } //formFieldValues[\"EMAIL\"]=document.getElementById(\"cpa-100001000000003303\").value;//no i18n /* document.getElementsByTagName(\"zia-chat-bot\")[0].component.sendTranscript(JSON.stringify(formFieldValues), function(t) { //no i18n document.getElementsByTagName(\"zia-chat-bot\")[0].component.scrollTop(); }, \"Form Fields Submitted\", null); //no i18n */ ziaskills.sendMessage(\"Form Fields Submitted\", JSON.stringify(formFieldValues));//no i18n } zia.setMessageData=function(action,param){ if(Object.keys(ziaMessageData).length>0){ return ziaMessageData; } }"
