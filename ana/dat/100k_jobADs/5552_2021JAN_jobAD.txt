"The job number is not included in general ledger entries when you post a final invoice for a purchase order in Microsoft Dynamics NAV 2009Saltar al contenido principalMicrosoftSoporteSoporteSoporteInicioMicrosoft 365OfficeWindowsSurfaceXboxOfertasMásComprar Microsoft 365Todo MicrosoftMicrosoft 365OfficeWindowsSurfaceXboxOfertasSoporteSoftwareAplicaciones WindowsOneDriveOutlookSkypeOneNoteMicrosoft TeamsPCs y dispositivosComprar XboxAccesoriosEntretenimientoXbox Game Pass UltimateXbox Live GoldXbox y juegosJuegos para PCJuegos para WindowsPelículas y TVEmpresasMicrosoft AzureMicrosoft Dynamics 365Microsoft 365Microsoft IndustryPlataforma de datosMicrosoft AdvertisingPower PlatformComprar en EmpresaDesarrollador.NETVisual StudioWindows ServerDesarrollar aplicaciones para WindowsDocumentosPower AppsHoloLens 2OtroMicrosoft RewardsSeguridad y descargas gratuitasEducaciónTarjetas regaloLicenciamientoVer mapa del sitioBuscar Search for helpCancelarIniciar sesiónProductosMicrosoft 365OfficeOutlookMicrosoft TeamsOneDriveOneNoteWindowsMicrosoft Edgemás...DispositivosSurfaceAccesorios para PCMóvilXboxHoloLensGarantía del hardwareNovedadesCuentas y facturaciónPlantillasMás soporte técnicoForos de la comunidadAdministradoresDesarrolladorEducaciónPequeñas empresasInformar de una estafa en soporteThe job number is not included in general ledger entries when you post a final invoice for a purchase order in Microsoft Dynamics NAV 2009Microsoft Dynamics NAV 2009 R2 Dynamics NAV 2009 Service Pack 1 Más...MenosThis article applies to Microsoft Dynamics NAV for all countries and all language locales.SymptomsAssume that you create a purchase order in which the prepayment and the job number are specified in Microsoft Dynamics NAV 2009. You post the prepayment invoice and post the final invoice for the purchase order. In this situation, the job number is not included in the general ledger (G/L) entries that are created for the final invoice. Therefore, you cannot run the evaluations on the job number in the G/L entries.This problem occurs in the following products:Microsoft Dynamics NAV 2009 R2Microsoft Dynamics NAV 2009 Service Pack 1 (SP1)ResolutionHotfix informationA supported hotfix is now available from Microsoft. However, it is only intended to correct the problem that is described in this article. Apply it only to systems that are experiencing this specific problem. This hotfix may receive additional testing. Therefore, if you are not severely affected by this problem, we recommend that you wait for the next Microsoft Dynamics NAV service pack or the next Microsoft Dynamics NAV version that contains this hotfix.Note In special cases, charges that are ordinarily incurred for support calls may be canceled if a Technical Support Professional for Microsoft Dynamics and related products determines that a specific update will resolve your problem. The usual support costs will apply to additional support questions and issues that do not qualify for the specific update in question.Installation informationMicrosoft provides programming examples for illustration only, without warranty either expressed or implied. This includes, but is not limited to, the implied warranties of merchantability or fitness for a particular purpose. This article assumes that you are familiar with the programming language that is being demonstrated and with the tools that are used to create and to debug procedures. Microsoft support engineers can help explain the functionality of a particular procedure, but they will not modify these examples to provide added functionality or construct procedures to meet your specific requirements.Note Before you install this hotfix, verify that all Microsoft Navision client users are logged off the system. This includes Microsoft Navision Application Services (NAS) client users. You should be the only client user who is logged on when you implement this hotfix.To implement this hotfix, you must have a developer license.We recommend that the user account in the Windows Logins window or in the Database Logins window be assigned the \"SUPER\" role ID. If the user account cannot be assigned the \"SUPER\" role ID, you must verify that the user account has the following permissions:The Modify permission for the object that you will be changing.The Execute permission for the System Object ID 5210 object and for the System Object ID 9015 object.Note You do not have to have rights to the data stores unless you have to perform data repair.Code changesNote Always test code fixes in a controlled environment before you apply the fixes to your production computers.To resolve this problem, follow these steps:Change the code in the UpdateUnitCost function in the Purchase Line table (39) as follow:Existing code...Currency.TESTFIELD(\"Unit-Amount Rounding Precision\");\"Unit Cost\" := ROUND(\"Unit Cost\",Currency.\"Unit-Amount Rounding Precision\");UpdateSalesCost;// Delete the following line.  IF JobTaskIsSet AND NOT UpdateFromVAT THEN BEGINCreateTempJobJnlLine(FALSE);JobJnlLine.VALIDATE(\"Unit Cost (LCY)\",\"Unit Cost (LCY)\");UpdatePricesFromJobJnlLine;END;END;...Replacement code...Currency.TESTFIELD(\"Unit-Amount Rounding Precision\");\"Unit Cost\" := ROUND(\"Unit Cost\",Currency.\"Unit-Amount Rounding Precision\");UpdateSalesCost;// Add the following line.  IF JobTaskIsSet AND NOT UpdateFromVAT AND NOT \"Prepayment Line\" THEN BEGINCreateTempJobJnlLine(FALSE);JobJnlLine.VALIDATE(\"Unit Cost (LCY)\",\"Unit Cost (LCY)\");UpdatePricesFromJobJnlLine;END;END;...Change the code in the CreatePrepmtLines function in the Purch.-Post codeunit (90) as follow:Existing code 1...END;GLAcc.GET(GenPostingSetup.\"Purch. Prepayments Account\");TempLineFound := FALSE;IF PurchHeader.\"Compress Prepayment\" THEN BEGINTempPrepmtPurchLine.SETRANGE(\"No.\",GLAcc.\"No.\");// Delete the following lines.  IF TempPrepmtPurchLine.FIND('-') THEN  TempLineFound := DocDimMatch(PurchLine,TempPrepmtPurchLine.\"Line No.\",TempDocDim);  TempPrepmtPurchLine.SETRANGE(\"No.\");// End of the lines.END;IF TempLineFound THEN BEGINIF PurchHeader.\"Currency Code\" <> '' THEN BEGINTempPrePayDeductLCYPurchLine := PurchLine;TempPrePayDeductLCYPurchLine.\"Prepmt. Amount Inv. (LCY)\" :=...Replacement code 1...END;GLAcc.GET(GenPostingSetup.\"Purch. Prepayments Account\");TempLineFound := FALSE;IF PurchHeader.\"Compress Prepayment\" THEN BEGINTempPrepmtPurchLine.SETRANGE(\"No.\",GLAcc.\"No.\");// Add the following lines.  TempPrepmtPurchLine.SETRANGE(\"Job No.\",\"Job No.\");  IF TempPrepmtPurchLine.FIND('-') THEN  TempLineFound := DocDimMatch(PurchLine,TempPrepmtPurchLine.\"Line No.\",TempDocDim);  TempPrepmtPurchLine.SETRANGE(\"No.\");  TempPrepmtPurchLine.SETRANGE(\"Job No.\");// End of the lines.END;IF TempLineFound THEN BEGINIF PurchHeader.\"Currency Code\" <> '' THEN BEGINTempPrePayDeductLCYPurchLine := PurchLine;TempPrePayDeductLCYPurchLine.\"Prepmt. Amount Inv. (LCY)\" :=...Existing code 2...IF TempDocDim.\"Dimension Code\" = GLSetup.\"Global Dimension 1 Code\" THENTempPrepmtPurchLine.\"Shortcut Dimension 1 Code\" := TempDocDim.\"Dimension Value Code\";IF TempDocDim.\"Dimension Code\" = GLSetup.\"Global Dimension 2 Code\" THENTempPrepmtPurchLine.\"Shortcut Dimension 2 Code\" := TempDocDim.\"Dimension Value Code\";UNTIL DocDim.NEXT = 0;TempPrepmtPurchLine.INSERT;TransferExtText.PrepmtGetAnyExtText(TempPrepmtPurchLine.\"No.\",DATABASE::\"Purch. Inv. Line\",PurchHeader.\"Document Date\",PurchHeader.\"Language Code\",TempExtTextLine);IF TempExtTextLine.FIND('-') THEN...Replacement code 2...IF TempDocDim.\"Dimension Code\" = GLSetup.\"Global Dimension 1 Code\" THENTempPrepmtPurchLine.\"Shortcut Dimension 1 Code\" := TempDocDim.\"Dimension Value Code\";IF TempDocDim.\"Dimension Code\" = GLSetup.\"Global Dimension 2 Code\" THENTempPrepmtPurchLine.\"Shortcut Dimension 2 Code\" := TempDocDim.\"Dimension Value Code\";UNTIL DocDim.NEXT = 0;// Add the following lines.  TempPrepmtPurchLine.\"Job No.\" := PurchLine.\"Job No.\";  TempPrepmtPurchLine.\"Job Task No.\" := PurchLine.\"Job Task No.\";  TempPrepmtPurchLine.\"Job Line Type\" := PurchLine.\"Job Line Type\";// End of the lines.TempPrepmtPurchLine.INSERT;TransferExtText.PrepmtGetAnyExtText(TempPrepmtPurchLine.\"No.\",DATABASE::\"Purch. Inv. Line\",PurchHeader.\"Document Date\",PurchHeader.\"Language Code\",TempExtTextLine);IF TempExtTextLine.FIND('-') THEN...PrerequisitesYou must have one of the following products installed to apply this hotfix:Microsoft Dynamics NAV 2009 R2Microsoft Dynamics NAV 2009 Service Pack 1 (SP1)Removal informationYou cannot remove this hotfix.StatusMicrosoft has confirmed that this is a problem in the Microsoft products that are listed in the \"Applies to\" section.Note This is a \"FAST PUBLISH\" article created directly from within the Microsoft support organization. The information contained herein is provided as-is in response to emerging issues. As a result of the speed in making it available, the materials may include typographical errors and may be revised at any time without notice. See Terms of Use for other considerations.¿Necesita más ayuda?Ampliar sus conocimientosExplorar los cursosObtener nuevas características primeroUnirse a Microsoft Insider¿Le ha sido útil esta información?SíNoDe acuerdo. ¿Algún comentario más? Cuanto más nos cuenta, más podemos ayudar. ¿Cómo podemos mejorar? Cuanto más nos cuenta, más podemos ayudar.EnviarNo, gracias¡Gracias por sus comentarios!Gracias por sus comentarios. Quizá le interese ponerse en contacto con uno de nuestros agentes de soporte de Office.Contacto con el soporte técnico×NovedadesSurface Laptop GoSurface Pro XSurface Go 2Surface Book 3Microsoft 365Aplicaciones de Windows 10HoloLens 2Microsoft StorePerfil de la cuentaCentro de descargaSoporte de Microsoft StoreDevolucionesSeguimiento de pedidosReciclarGarantías comercialesEducaciónMicrosoft en la educaciónOffice para estudiantesOffice 365 para escuelasOfertas para estudiantes y padresMicrosoft Azure en la educaciónEmpresaAzureAppSourceAutomociónAdministraciones públicasSaludFabricaciónServicios financierosComercio al por menorDesarrolladorMicrosoft Visual StudioCentro de desarrollo de WindowsCentro para desarrolladoresPrograma de desarrolladores de MicrosoftChannel 9Centro para desarrolladores de OfficeCompañíaOportunidades de empleoAcerca de MicrosoftNoticias de la compañíaPrivacidad en MicrosoftInversoresSeguridadEspañol (España, alfabetización internacional)Ponte en contacto con MicrosoftPrivacidadGestionar cookiesCondiciones de usoMarcas registradasSobre nuestra publicidadDocs de cumplimiento de la UE© Microsoft 2021"
