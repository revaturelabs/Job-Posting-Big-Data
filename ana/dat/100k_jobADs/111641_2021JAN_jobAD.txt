"Some SIPS in the submission job hang for several hours unprocessed - Ex Libris Knowledge CenterSkip to main contentMore SitesExlibrisgroup.comEx Libris Support PortalEx Libris Trust CenterDeveloper NetworkIdea ExchangeSystem StatusPQ Support CenterSystem StatusMulti-tenant environmentsSingle-tenant environmentsSubmit a CaseSome SIPS in the submission job hang for several hours unprocessedSubscribe by RSSBackSearch siteSearchSearchGo back to previous articleSign inExpand/collapse global hierarchyHomeRosettaKnowledge ArticlesExpand/collapse global locationSome SIPS in the submission job hang for several hours unprocessedLast updatedSave as PDFShareShareTweetShareAdditional InformationArticle Type: GeneralProduct: RosettaProblem Symptoms:1. Some SIPS in the submission job are processed, but other hang for several hours.2. Processing errors (e.g.):SIP 7682 deposit processing took long time (~7.5 hours):ERROR | wrapper | 2013/09/26 08:51:21 | Shutdown failed: Timed out waiting for the JVM to terminate.ERROR | wrapper | 2013/09/26 08:51:21 | JVM did not exit on request, terminated3. Workers are thrown out:2013-09-18 03:33:01,185 ERROR [org.hibernate.util.JDBCExceptionReporter] (DEPOSIT_WORK_QUEUE Queue Job Receiver 358) [] ORA-24010: QUEUE V2GR_ROS00.DEPOSIT_WORK_QUEUE does not existCause:Not enough jboss.maxmemory in global.propertiesResolution:Update global.properties file to increase the maximum allocated memory from jboss.maxmemory=4000 to jboss.maxmemory=60001. dps_conf2. global.properties [e.g. increase jboss.maxmemory=6000]3. dps_stop4. Run set_globals>dps_bin>set_globals.sh5. dps_startAdditional InformationIf the above doesn?t solve the issue it?s possible that the sshd process is still consuming lots of CPU.In this case check the Heap Dump file from the day the SIP ran to see how many GB were used.It may be possible that ~1.2GB (e.g.) is being used up by copies of the full METS.The stack trace will likely show that the out of memory happens when the system replaces the file path in the METS, it has to duplicate the String (METS).In this case the dps_log/server.log will show ?java.lang.string.replaceFirst? for the PERMANENT_WORK_QUEUEIts possible to save a few hundred MBs by replacing the String in place.However, Rosetta will still use most of the allowed 4G, so a larger METS might cause an out of memory exception, so consider increasing the memory (increased heap size) anyway.Category: Deposit - RosettaSubject: Server Processing - RosettaArticle last edited: 12/4/2013View article in the Exlibris Knowledge CenterBack to topSolr servers are down after 5.4 upgrade: “The following Solr servers are down <<server name>>. Search results may be partial. Please contact the System Administrator\"Source metadata identifiers in Rosetta version 6Was this article helpful?YesNoRecommended articlesThere are no recommended articles.Article typeTopicContent TypeKnowledge ArticleLanguageEnglishProductRosettaTagscontype:kbaDeposit - RosettaProd:RosettaServer Processing - RosettaType:General© Copyright 2021 Ex Libris Knowledge CenterPowered by MindTouch ®Term of UsePrivacy PolicyContact Us2021 Ex Libris. All rights reserved"
