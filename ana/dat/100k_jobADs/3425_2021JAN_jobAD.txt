"Pets & Animals | Find On VineSearchFavouritesGet QuotesMy ListingsGet Listed (Free)Owners LoginArts & Entertainment Autos & Vehicles Beauty & Fitness Books & Literature Business & Industrial Computers & Electronics Finance Food & Drink Games Health Hobbies & Leisure Home & Garden Internet & Telecom Jobs & Education Law & Government News Online Communities People & Society Pets & Animals Real Estate Reference Science Security & Security Services Shopping Sports TravelPets & AnimalsGR CabinsPet Products, Cabins, Cottages & Huts, Wood & Wooden productsDurbanGv AdYour KZN cabin masters, our quality cabins are built to last! We are the longest standing cabin company in KZN with over 50 years experience.	http://grcabins.co.za(074) 244 8443Get QuoteCall Now{{ favs.includes(12) ? \"Remove\" : \"To Favourites\" }}More...Kwazulu Natal Society For The BlindPet Products, Furniture, Charities & Outreach Organisations, Cane FurnitureBulwerA wide selection of cane and wicker furniture. We also have a repair workshop.	kznblind.org.za(031) 202 7277Get QuoteCall Now{{ favs.includes(168) ? \"Remove\" : \"To Favourites\" }}More...Zechariah HutsDurbanPet Products, Cabins, Cottages & HutsFree AdOne to two bedroom cottages, guard rooms, tool sheds and more.	zecharia.co.za(082) 927 4791Pets & Animals Listing Categories:Animal Products & ServicesPetsWildlifeListings here also cover:Pet ProductsCabins, Cottages & HutsWood & Wooden productsFurnitureCharities & Outreach OrganisationsCane Furniture© Find On Vine 2020 By The Grapevine MagazineJoin For FreeOwner PricingFacebook | Twitter | TelegramFree account applicationStep {{join.step}} / 2DoneYour Email Address:Confirm your Email Address:Set a good password:Must contain a number, a lowercase & an uppercase letter, be at least six characters.I forgot my password.Code Of ConductYou agree to respond to any queries and or quotation requests within a reasonable time either telephonically or by email.You must notify us should your business close so that we can remove your listing and avoid user frustration.I agree to Find On Vines code of conduct.You may not list the following:Anything of an illegal, pornographic or drug related nature.Anything to do with weapons and or the sale of weapons.I will not post listings related to the above.Done, you will recieve an email with your credentails shortly. Feel free your first listing now.My Listings{{ join.step==1 ? 'Cancel' : 'Back' }}{{ join.step==2 ? 'Finish' : 'Next' }}Free ListingFree foreverDisplays your name and short description.Shows your website and contact number.Boosted ListingR120 pm (Stop boosting anytime)Displays your name, contact details and short description.Shows your website and contact number.Upload and display your photos.Utilize our quote system.Add a shop now or visit now button.A dedicated search engine optomised page for your business.Enjoy 6 Months Free when you sign up today!Get 6 months free!Owners Password ResetYour Email Address:CloseSend my reset linkBusiness Owners LoginYour Email Address:Your Password:Remember MeGet my business listed for free.I forgot my password.CancelLogin{{success.title}}{{success.message}}Ok{{oops.title}}{{oops.message}}OkGrapevine ClientTo get listed and have your advert boosted for free, place an advert in the Grapevine MagazineThe Grapevine Magazine is Kwazulu Natal's top home improvement leads generation platform for online and print distribution. The Grapevine is extremely popular with the public and has proved to be an effective and powerful marketing tool for it's advertisers in Kwazulu Natal and surrounding areas.If you would like to get your message out and connect with home and business owners, give Grapevine a call on (031) 4653-431Free design of full-colour adverts and no charges for changesProven, monitored and FREE distribution every month.Free listing on the Grapevine WebsiteFree boosted listing on Find On Vine110 000 total monthly distributionOkReport Outdated ListingBusiness has closed.Contact details are wrong.Bad information.CloseReportYour Full Name:Your Email:Confirm your email:Your cell number:Confirm your cell number:Description of work required:Your address:Get quotes from:{{c.name}}Select all {{cids.length}} listingsCancelSubmit Request* Please note this is an online enquiry form and NOT a sales aid. Anyone using this form for marketing purposes are subject to prosecution under the Electronic Communications & Transactions Act.`; Vue.component('quote', { data: function () { return { isBusy : 0, quote :{ name : '', email : '', emailConfirm : '', cell : '', cellConfirm : '', desc : '', address : '', cids : [] }, cids : CIDS } }, mounted(){ this.quoteSelectAll(); }, methods: { // Submit quotes request to selected advertisers requestQuotes(){ // Reset document.getElementById(\"quoteName\").classList.remove('uk-form-danger'); document.getElementById(\"quoteEmail\").classList.remove('uk-form-danger'); document.getElementById(\"quoteEmailConfirm\").classList.remove('uk-form-danger'); document.getElementById(\"quoteCell\").classList.remove('uk-form-danger'); document.getElementById(\"quoteCellConfirm\").classList.remove('uk-form-danger'); document.getElementById(\"quoteDesc\").classList.remove('uk-form-danger'); document.getElementById(\"quoteAddress\").classList.remove('uk-form-danger'); document.getElementById(\"quoteCheckboxes\").classList.remove('uk-form-danger'); // You may pass let errors = false; // Check name if( this.quote.name.length == 0){ document.getElementById(\"quoteName\").classList.add('uk-form-danger'); } // Validate email address if( ! validateEmail(this.quote.email)) { document.getElementById(\"quoteEmail\").classList.add('uk-form-danger'); errors = true; } // Check confirmation of email address if( this.quote.email !== document.getElementById(\"quoteEmailConfirm\").value || document.getElementById(\"quoteEmailConfirm\").value == '') { document.getElementById(\"quoteEmailConfirm\").classList.add('uk-form-danger'); errors = true; } // Validate cell number if( ! validateCell(this.quote.cell)){ document.getElementById(\"quoteCell\").classList.add('uk-form-danger'); errors = true; } // Check confirmation of cell number if( this.quote.cell !== document.getElementById(\"quoteCellConfirm\").value || document.getElementById(\"quoteCellConfirm\").value == '') { document.getElementById(\"quoteCellConfirm\").classList.add('uk-form-danger'); errors = true; } // Check desc of work if( this.quote.desc.length == 0){ document.getElementById(\"quoteDesc\").classList.add('uk-form-danger'); } // Check address of work if( this.quote.address.length == 0){ document.getElementById(\"quoteAddress\").classList.add('uk-form-danger'); } if( this.quote.cids.length == 0){ document.getElementById(\"quoteCheckboxes\").classList.add('uk-form-danger'); } this.isBusy = true; app.post('/rest/quotes/request', {quote: this.quote}).then( (res) => { this.isBusy = false; UIkit.modal('#modal-success').show(); }); }, // Select all listings on page to request a quote from quoteSelectAll(){ this.quote.cids = []; if(CIDS){ CIDS.forEach((c) => { this.quote.cids.push(c.id); }); } } }, template: quoteTmpl });; const favsTmpl = `Your FavouritesNo favourites foundYou can add your prefered businesses, suppliers or service providers here by clicking the \"Add to favourites\" buttons. These entries are stored within your own browser and unique to your device.{{f.name}}* These entries are stored within your own browser and unique to your device.Close`; Vue.component('favs', { props : ['favs'], data : function () { return { isBusy : 0, detailedFavs : [], } }, watch:{ // Update Favs on each change favs(){ //this.gatherFavs(); } }, created(){ //this.gatherFavs(); }, methods:{ gatherFavs(){ app.post('/rest/feed/myfavs', this.favs).then( (r) => { this.detailedFavs = r; }); } }, template: favsTmpl });; const dashTmpl = `My ListingsAdd New ListingListingBoostedActive{{l.name}}EditClose`; Vue.component('dash', { props : ['user'], data : function () { return { isBusy : 0 } }, template: dashTmpl });; const editTmpl = `{{e.id ? 'Editing '+ e.name : 'New Listing'}}DetailsKeywordsLocationDescriptionPhotosBoostWebmasterWebsiteEnter your company details here. Users will find you, using your company name and keywords.Company Name:* Can appear in title of a Google.Company Website:Main Contact number:Alternate Contact number:Public Email Address:Private Email Address: * System messages and quotes.Short description* Text here can appear in Google search results.Active & searchableAccept quotes from Quote SystemCovid-19 CompliantUse \"Shop Now\" Button for website links insteadTags help users find your business. Tags are organised into sections and then categories. You can choose as many tags as you like between different sections and categories to cover all your business offers.Should you not find a tag that matches your buisness, send us an email and we will add it for you.Company Sector / Industry: {{o.section}}Sector category: {{c.category}}Click on the Keywords below that you would like to add:+ {{s.tag}}{{t.tag}}You must have at least one tag set to be found.We are all about user location and matching you up with your local clients. This section is critical to making that happen!Company address:{{p.address}}We service the whole of South Africa We service select areasClear* Draw your services areas on the map.Long description:Upload images by dropping them here orselecting one.(Max upload size is {{maxupload}})DeleteWe offer two ways to boost your listing with us. Select the appropriate one below:R{{boostval}} monthly subscriptionYour listing above other non-boosted listings.Showcase your work with quality images.All your contact details visible.Unsubscribe anytime.Boost NowSubscribe via PayFast now and we will not bill you for the first six months.R{{boostval}} monthly subscriptionYour listing above other non-boosted listings.Showcase your work with quality images.All your contact details visible.Unsubscribe anytime.Stop BoostingIf you cancel, your forfeit your free months!Grapevine Magazine Advertisement(KZN Only)Your listing above other non-boosted listings.Showcase your work with quality images.All your contact details visible.Full colour print advertisement in the Grapevine Magazine.Valid for as long as you have a Grapevine Magazine advert.EnquireGv Code:Gv Rep: Rose DianeBoostedActive on GV websiteActive on Fov websiteDelete Listing!SaveClose`; Vue.component('edit', { props : ['e', 'user', 'sections', 'categories'], data : function () { return { isBusy : 0, enqueryIsBusy : 0, boostIsBusy : 0, tags_term : '', tags_suggest : '', place_suggest : [], show_serviceable_map : 0, boostval : boost, sixMonthsFree : true, // First six months free, maxupload : MAXUPLOAD } }, computed: { prorata : function(){ return this.getProRata(); } }, mounted(){ }, watch:{ // Pull in keyword suggestions 'e.category_id' : function(){ app.post('/rest/tags/find', { sec:this.e.section_id, cat:this.e.category_id }).then((res) => { this.tags_suggest = res; }); }, 'e.address' : function(newAddress){ if(newAddress && newAddress.length >= 4){ app.get('https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates?f=json&singleLine='+newAddress+'&outFields=Match_addr,Region,RegionAbbr,Subregion,Sector,City,District,Territory') .then((res) => { console.log(res.candidates); this.place_suggest = res.candidates; }); } }, 'e.id' : function(newId){ // Upload module var bar = document.getElementById('js-progressbar'); UIkit.upload('.js-upload', { url : '/photo/upload/'+newId, multiple : true, //allow : '' loadStart: function (e) { app.isBusy = 1; bar.removeAttribute('hidden'); bar.max = e.total; bar.value = e.loaded; }, progress: function (e) { bar.max = e.total; bar.value = e.loaded; }, loadEnd: function (e) { bar.max = e.total; bar.value = e.loaded; }, completeAll: function () { setTimeout(function () { bar.setAttribute('hidden', 'hidden'); }, 1000); // Repopulate photos app.get(\"/rest/feed/\"+newId) .then( (res) => { app.e.photos = res.photos; app.isBusy = 0; }); } }); }, 'show_serviceable_map' : function(s){ this.$nextTick(() => { var osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18, attribution: '© OpenStreetMap contributors' }); var map = new L.Map('serviceableMap', { center: new L.LatLng(-29.883333, 31.049999), zoom: 13 }); var drawnItems = L.featureGroup().addTo(map); if(app.e.gis){ var polygon = L.polygon(app.e.gis).addTo(map); } L.control.layers({ 'osm': osm.addTo(map) },{ 'drawlayer': drawnItems } ).addTo(map); map.addControl(new L.Control.Draw({ draw: { polygon: { allowIntersection: false, showArea: true }, polyline : false, rectangle : false, marker : false, circle : false } })); map.on(L.Draw.Event.CREATED, function (e) { var layer = e.layer; var type = e.layerType; if (type === 'polygon') { var points = layer._latlngs; var geojson = layer.toGeoJSON(); app.e.gis.push(points); } drawnItems.addLayer(layer); }); }); } }, methods:{ // Updates an advert patch(){ // Show we working on it this.isBusy = 1; // Set new entries to send an id of 0 if (typeof this.e.id == 'undefined') { var url = '/rest/feed/0'; this.e.fov_active = 1; this.e.accept_quotes = 1; }else{ var url = '/rest/feed/' + this.e.id; } // Send off app.post(url, this.e, 'PATCH') .then( (eid) => { this.e.id = eid; }) .then( () => { app.$refs.dash.gatherOwnerListings(); }) .finally( () => { this.isBusy = 0; }); }, // Ads tags to listing tags_add(tagIn){ //this.e.tags = []; if(typeof this.e.tags !== 'undefined'){ if(this.e.tags.filter(t => t.id == tagIn.id) == false){ this.e.tags.push(tagIn); } } }, // Removes tags from a listing tags_del(tagOut){ if(typeof this.e.tags !== 'undefined'){ this.e.tags = this.e.tags.filter(function (tag) { return tag.id == tagOut.id ? false : true; }); } }, // Removes photos from a listing delPhoto(pid){ app.post('/rest/photo', {id:pid}, 'DELETE') .then( () => { app.isBusy = 1; app.get(\"/rest/feed/\"+this.e.id) .then( (res) => { app.e.photos = res.photos; app.isBusy = 0; }); }); }, // Deletes a listing delListing(){ UIkit.modal.confirm('Sure?').then(function() { app.isBusy = 1; app.post('/rest/feed/del', {id:app.e.id}, 'DELETE') .then( () => { app.isBusy = 0; return true; }); }) }, // Set the address data updateAddressData(newAddressObj){ this.e.address = newAddressObj.address; this.e.lat = newAddressObj.location.x; this.e.lng = newAddressObj.location.y; }, // Clear service area clearServiceMap(){ alert('todo'); }, // Gets the number of days left in the current month getRemainingDays : () => { var date = new Date(); var time = new Date(date.getTime()); time.setMonth(date.getMonth() + 1); time.setDate(0); var days =time.getDate() > date.getDate() ? time.getDate() - date.getDate() : 0; return(days); }, // Gets the total number of days in a month getTotalDays : () => { var now = new Date(); var days = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate(); return(days); }, // Pro Rata Helper getProRata(){ return Math.round((boost/this.getTotalDays()) * this.getRemainingDays()); }, // Enquire about advertising enquire(){ this.enqueryIsBusy = true; app.post('/rest/enquire/'+this.e.id, {}, 'PATCH'). then( () => { app.enqueryIsBusy = false; UIkit.modal.yay('Awesome, one of our sales ladies will give you a call.'); }); }, // Subscribes a listing boost(){ // Gather needed fields const firstName = document.getElementById(\"firstName\").value; const lastName = document.getElementById(\"lastName\").value; const email = document.getElementById(\"lastName\").value; const cellNumber = document.getElementById(\"cell\").value; // Validate if(firstName.length == 0 || lastName.length == 0 || cellNumber.length == 0 || cellNumber.length != 10){ UIkit.modal.alert('Please enter your \"first name\", \"last name\" and a \"contact number\". Your contact number should be numbers only.').then(function () { console.log('Alert closed.'); }); return true; } // Build order and structure of call const pf = { pfFields : { merchant_id : null, merchant_key : null, return_url : null, cancel_url : null, notify_url : null, name_first : firstName, name_last : lastName, email_address : email, cell_number : cellNumber, m_payment_id : \"1\", amount : \"0.00\", //this.getProRata(), item_name : \"Boost\", custom_int1 : this.e.id, custom_str1 : cellNumber, subscription_type : 2 }, pfAction : null, }; //switch(env){ //	case 'dev' : pf.pfFields.merchant_id = 10012952; pf.pfFields.merchant_key = \"q6phzn40lpfag\"; pf.pfFields.passphrase = \"p455phr4S324a4\"; pf.pfAction = \"https://sandbox.payfast.co.za/eng/process\"; pf.pfFields.return_url = \"https://findonvine.co.za/payment/success/\"+this.e.id; pf.pfFields.cancel_url = \"https://findonvine.co.za/payment/cancel/\"+this.e.id; pf.pfFields.notify_url = \"https://findonvine.co.za/payment/notify/\"+this.e.id; console.log('In Payfast sandbox mode'); //	break; //	default : //	pf.pfFields.merchant_id = 13802210; //	pf.pfFields.merchant_key = \"542eioolwfpt8\"; //	pf.pfFields.passphrase = \"Gr4p3v1n30nl1n3\"; //	pf.pfAction = \"https://www.payfast.co.za/eng/process\"; //	pf.pfFields.return_url = root + \"/payment/success\"+this.e.id; //	pf.pfFields.cancel_url = root + \"/payment/cancel\"+this.e.id; //	pf.pfFields.notify_url = root + \"/payment/notify/\"+this.e.id; //} // Build form var form = document.createElement(\"form\"); form.method = \"POST\"; form.action = pf.pfAction; // Attach each field const params = Object.entries(pf.pfFields); var sig = new Array(); params.forEach(function(v, i){ var input = document.createElement(\"input\"); input.name = v[0]; input.value = v[1].toString().replace(\" \", \"\"); form.appendChild(input); sig.push(v[0]+'='+encodeURIComponent(input.value)); console.log(input.value); }); // Attach signature var concatString = sig.join('&'); var md5Result = CryptoJS.MD5(concatString).toString(); var input = document.createElement(\"input\"); input.value = md5Result; input.name = 'signature'; form.appendChild(input); // Attach form to document document.body.appendChild(form); // Submit the form form.submit(); }, // Cancel a subscription unBoost(){ //this.enqueryIsBusy = true; app.post('/rest/boost/remove/'+this.e.id, {}, 'PATCH') .then( () => { //	app.enqueryIsBusy = false; UIkit.modal.yay('Done, this listing is no longer boosted and will not be invoiced for next month.'); }); } }, template: editTmpl }); var bar = document.getElementById('js-progressbar');; // VueJS Mixins var user = { data: function(){ return { join : { step : 1 } } }, methods: { // User Join joinNext(){ // Assume validation passes let next = 1; // Go switch(this.join.step){ // Step 1 case 1 : // Reset document.getElementById(\"userEmail\").classList.remove('uk-form-danger'); document.getElementById(\"userEmailConfirm\").classList.remove('uk-form-danger'); document.getElementById(\"userPass\").classList.remove('uk-form-danger'); // Validate email address if( ! validateEmail(app.user.email)) { document.getElementById(\"userEmail\").classList.add('uk-form-danger'); next = 0; } // Check confirmation of email address if( app.user.email !== document.getElementById(\"userEmailConfirm\").value || document.getElementById(\"userEmailConfirm\").value == '') { document.getElementById(\"userEmailConfirm\").classList.add('uk-form-danger'); next = 0; } // Check for a good password if( ! validatePassword(document.getElementById(\"userPass\").value)) { document.getElementById(\"userPass\").classList.add('uk-form-danger'); next = 0; } break; // Step 2 case 2 : // Reset document.getElementById(\"agreeToListingsType\").parentElement.classList.remove('uk-form-danger'); document.getElementById(\"agreeToCodeOfConduct\").parentElement.classList.remove('uk-form-danger'); // Must agree to code of conduct if ( ! document.getElementById('agreeToCodeOfConduct').checked) { document.getElementById(\"agreeToCodeOfConduct\").parentElement.classList.add('uk-form-danger'); next = 0; } // Must agree to terms if ( ! document.getElementById('agreeToListingsType').checked) { document.getElementById(\"agreeToListingsType\").parentElement.classList.add('uk-form-danger'); next = 0; } break; } // All good, move on if(next == 1){ this.join.step+= 1; } // Submit on step 3 if(this.join.step == 3){ app.post('/rest/users/join', app.user).then(r => { this.join.step+= 1; }).catch(e => { this.join.step = 1; }); } // Done return true; }, joinBack(){ if(this.join.step == 1){ UIkit.modal(\"#modal-join\").hide(); return; } this.join.step-= 1; }, // User login login(){ // Validate if(app.user.email && app.user.pass){ // Reset app.isBusy = true; // Send post request to API app.post(\"/rest/users/login\", { email:app.user.email, pass:app.user.pass }) .then(user => { app.user.id = user.id; app.user.status = user.status; app.gatherUserListings(); }) .then( () => { app.isBusy = false; UIkit.modal(\"#modal-owners\").hide(); }); // Done return true; } // Oops if( ! app.user.email){ app.shake(\"userLoginEmail\", true); } if( ! app.user.pass){ app.shake(\"userLoginPass\", true); } return false; }, // Send logout request and update state logout(){ UIkit.modal.confirm('Are you sure? Click \"ok\" to logout.').then(function() { app.post(\"/rest/users/logout\").then(() => { app.user.id = 0; app.user.status = 0; app.isBusy = false; }) }); }, // User reset password forgotRequest(){ // Validate email address if( ! validateEmail(app.user.email)) { app.shake(\"forgotUserEmail\", true); return false; } // Working app.isBusy = true; // Send request app.post('/rest/users/forgotrequest', {email:this.user.email}).then(r => { UIkit.modal.yay(r); }); // All good return true; } } }; var edit = { data: function(){ return { e : {} } }, methods: { edit(eid){ // Reset app.e = {}; // Load UIkit.modal(\"#modal-edit\").show(); // Send get request to API if(eid > 0){ this.isBusy = 1; app.get(\"/rest/feed/\"+eid) .then( (res) => { app.e = res; app.isBusy = 0; }) .finally( () => { this.isBusy = 0; }); } // Done return true; } } }; var favs = { computed:{ // Checks if the current advert is in the favs list inFav(){ if(this.favs.length > 0 && cid > 0){ return typeof this.favs.find(o => o.aid === cid) === 'undefined' ? false : true; } return false; } }, methods: { // Adds and removes favs to and from localStorage favToggle(aid){ if(localStorage){ // Check if advert id exists if( ! this.favs.includes(aid) ){ this.favs.push(aid); } else{ // Return a fav list with the id removed this.favs = this.favs.filter(function(el) { return el !== aid; }); } // Update local storage localStorage.setItem('favs', JSON.stringify(this.favs)); } } } }; // Main App UIkit.modal.oops = function(message, title = 'Oops!'){ app.isBusy = false; app.oops.title = title; app.oops.message = message; UIkit.modal('#modal-oops').show(); } UIkit.modal.yay = function(message, title = 'Success!'){ app.isBusy = false; app.success.title = title; app.success.message = message; UIkit.modal('#modal-success').show(); } var app = new Vue({ el : '#app', mixins : [user, favs, edit], data : { isHome : false, isBusy : false, windows:{ getListed : false, owners : false, subscribe : false }, lookingForVal : '', user : { listings : [], status : 0, email : '', pass : '', id : 0, pos : 0, lat : 0, lng : 0 }, success : { title : 'Success!', message : 'Your request was Successful!' }, oops : { title : null, message : null }, favs : [], sections : SECTIONS, categories : CATEGORIES, cids : CIDS // List of ads currently on this page }, mounted(){ // Show any flash messages if(FLASH == 1){ UIkit.modal('#modal-flash').show(); } // Set any user params if (typeof USER !== 'undefined') { this.user.status = USER.status; this.user.email = USER.email; this.user.id = USER.id; this.gatherUserListings(); } // Load local storage data if(localStorage){ // Update favs if(localStorage.getItem('favs')){ this.favs = JSON.parse(localStorage.getItem('favs')); } } // Page result map settings if(LATLNGARR){ /* var lMap = L.map('resultsMap', { scrollWheelZoom : false }).setView([-29.8, 30.8], 13); // Fire up map L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', { maxZoom: 18, attribution: 'Map data © OpenStreetMap contributors, ' + 'CC-BY-SA, ' + 'Imagery © Mapbox', id: 'mapbox.streets', }).addTo(lMap); var allbusinesses = L.geoJson(LATLNGARR, { onEachFeature : function(feature, layer){ layer.bindPopup(''+feature.properties.Name+'View Full Details'); } }); allbusinesses.addTo(lMap); // Fit all markers lMap.fitBounds(allbusinesses.getBounds(), { padding: [50, 50] }); */ } }, methods:{ // Shake Animation shake(id, focus = true){ var el = document.getElementById(id); el.classList.add(\"uk-animation-shake\"); if(focus){ el.focus(); } setTimeout(function(){ el.classList.remove(\"uk-animation-shake\"); }, 500); }, /** * Fetch API * @param {String} url */ async post(url, data, method = 'POST'){ const res = await fetch(url, { method : method, mode : 'cors', cache : 'no-cache', credentials : 'same-origin', headers : {'Content-Type': 'application/json'}, redirect : 'follow', referrerPolicy : 'no-referrer', body : JSON.stringify(data) // body data type must match \"Content-Type\" header }); const jsonData = await res.json(); if (res.status == 200) { return jsonData; } else { UIkit.modal.oops(jsonData.message); throw (jsonData.message); } }, async get(url, data){ const res = await fetch(url, { method : 'GET' }); const jsonData = await res.json(); if (res.status == 200) { return jsonData; } else { UIkit.modal.oops(jsonData.message); throw (jsonData.message); } }, todo(){ alert('toDo!'); }, // Enable locaTion based search location(){ if('geolocation' in navigator){ app.isBusy = 1; navigator.geolocation.getCurrentPosition( function(position){ app.user.pos = position; app.user.lat = parseFloat(position.coords.latitude); app.user.lng = parseFloat(position.coords.longitude); app.isBusy = 0; console.log(position); UIkit.modal.yay('Awesome, we will show results that are close to you.'); }, function(e){ UIkit.modal.oops(e.message); }, {timeout: 8000} ); return true; } UIkit.modal.oops('Sorry, location based search is not available in your current browser'); }, // Search checkLookingFor(e){ e.preventDefault(); if(this.lookingForVal){ window.location = '/'+this.lookingForVal; }else{ this.shake(\"lookingFor\"); } return false; }, gatherUserListings(){ this.post(\"/rest/feed/mylistings\").then(listings => { // Update array this.user.listings = listings; // If first time user, ask if they would like to create a listing if(listings.length == 0){ UIkit.modal.confirm('Would you like to create a listing now?').then(function() { UIkit.modal(\"#modal-edit\").show(); }); } }); } } });"
