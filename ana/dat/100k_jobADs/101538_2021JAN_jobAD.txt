"Job for openvpn@server.service failed because the control process exited with error code | DigitalOcean× Share this QuestionWhere would you like to share this to?TwitterRedditHacker NewsFacebookShare linkQuestion share link× Share your QuestionYour question has been posted! Share it with others to increase its visibility and to get it answered quickly.Where would you like to share this to?TwitterShare linkQuestion share link×Sign up for our newsletterGet the latest tutorials on SysAdmin and open source topics.Sign Up×Thanks for signing up!× Replace previous answer?A question can only have one accepted answer. Are you sure you want to replace the current answer with this one?Yes, I'm sure× Changed your mind?You previously marked this answer as accepted. Are you sure you want to unaccept it?Yes, I'm sureDigitalOcean homeProductsPricingDocsProduct DocsAPI DocsSign inSign in toCommunityControl PanelTutorialsQuestionsGet InvolvedParticipateHub for Good Supporting each other to make an impactWrite for DigitalOcean You get paid, we donate to tech non-profits.Hacktoberfest Contribute to Open SourceBuild with DigitalOceanCommunity Tools and IntegrationsHatch Startup ProgramMarketplace Partner ProgramSolutions Partner ProgramPresentation GrantsDigitalOcean on GitHubSearch DigitalOcean /Sign UpRelated1-Click Deploy: OpenVPN Access Server MarketplaceSlow connecting speed in China Shanghai QuestionSlow speed using droplet as VPN for home connection. Question0QuestionJob for openvpn@server.service failed because the control process exited with error codePosted April 30, 2017 37.7k viewsCentOSVPNApr 30 07:02:09 centos-512mb-sgp2.db-01 systemd[1]: Starting OpenVPN Robust And Highly Flexible T……Apr 30 07:02:09 centos-512mb-sgp2.db-01 openvpn[10300]: Sun Apr 30 07:02:09 2017 WARNING: cannot s…2)Apr 30 07:02:09 centos-512mb-sgp2.db-01 openvpn[10300]: Options error: –tls-auth fails with ‘ta.k…ryApr 30 07:02:09 centos-512mb-sgp2.db-01 openvpn[10300]: Options error: Please correct these errors.Apr 30 07:02:09 centos-512mb-sgp2.db-01 openvpn[10300]: Use –help for more information.Apr 30 07:02:09 centos-512mb-sgp2.db-01 systemd[1]: openvpn@server.service: main process exited, …UREApr 30 07:02:09 centos-512mb-sgp2.db-01 systemd[1]: Failed to start OpenVPN Robust And Highly Fle…er.Apr 30 07:02:09 centos-512mb-sgp2.db-01 systemd[1]: Unit openvpn@server.service entered failed state.Apr 30 07:02:09 centos-512mb-sgp2.db-01 systemd[1]: openvpn@server.service failed.Hint: Some lines were ellipsized, use -l to show in full.Add a commentSubscribe SubscribedShareReportBy:christiangelosulitRelated1-Click Deploy: OpenVPN Access Server MarketplaceSlow connecting speed in China Shanghai QuestionSlow speed using droplet as VPN for home connection. QuestionAdd a commentLeave a commentSign In to Comment1 comment1ddommar June 29, 2018Reply ReportI have the same issue “Job for openvpn@server.service failed because the control process exited with error code” and I haven’t been able to solve it. I’ve re-installed the openvpn and easy-rsa many times without success. Please some of you may help me??These answers are provided by our Community. If you find them useful, show some love by clicking the heart. If you run into issues leave a comment, or add your own answer to help others.×7 answers2hansen April 30, 2017@christiangelosulit Can you run the command again with -l as parameter to show full lines (like it says in the bottom).Reply Report0christiangelosulit April 30, 2017● openvpn@server.service - OpenVPN Robust And Highly Flexible Tunneling Applicat ion On serverLoaded: loaded (/usr/lib/systemd/system/openvpn@.service; enabled; vendor pre set: disabled)Active: failed (Result: exit-code) since Sun 2017-04-30 08:12:09 UTC; 8h agoProcess: 10641 ExecStart=/usr/sbin/openvpn –cd /etc/openvpn/ –config %i.conf (code=exited, status=1/FAILURE)Main PID: 10641 (code=exited, status=1/FAILURE)Apr 30 08:12:08 centos-512mb-sgp2.db-01 systemd[1]: Starting OpenVPN Robust And Highly Flexible Tunneling Application On server…Apr 30 08:12:09 centos-512mb-sgp2.db-01 systemd[1]: openvpn@server.service: main process exited, code=exited, status=1/FAILUREApr 30 08:12:09 centos-512mb-sgp2.db-01 systemd[1]: Failed to start OpenVPN Robu st And Highly Flexible Tunneling Application On server.Apr 30 08:12:09 centos-512mb-sgp2.db-01 systemd[1]: Unit openvpn@server.service entered failed state.Apr 30 08:12:09 centos-512mb-sgp2.db-01 systemd[1]: openvpn@server.service faile d.Reply Report0christiangelosulit April 30, 2017Thank you for your time :)Reply Report0hansen April 30, 2017Hi @christiangelosulit Did you solve the problem? Unsure, since you accepted the answer, but still posted a log of failure.Reply Report0christiangelosulit April 30, 2017sorry i am new to digitalocean i have no idea what is “mark as accepted” no the problem still occursReply Report0christiangelosulit April 30, 2017Apr 30 16:58:30 centos-512mb-sgp2.db-01 sshd[2260]: Failed password for root from 116.31.116.36 port 44493 ssh2Apr 30 16:58:30 centos-512mb-sgp2.db-01 sshd[2260]: Received disconnect from 116.31.116.36: 11: [preauth]Apr 30 16:58:30 centos-512mb-sgp2.db-01 sshd[2260]: PAM 2 more authentication failures; logname= uid=0 euid=0 tty=ssh ruser=Apr 30 16:59:08 centos-512mb-sgp2.db-01 sshd[2262]: pamunix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssApr 30 16:59:08 centos-512mb-sgp2.db-01 sshd[2262]: pamsucceedif(sshd:auth): requirement “uid >= 1000” not met by user “rooApr 30 16:59:10 centos-512mb-sgp2.db-01 sshd[2262]: Failed password for root from 59.45.175.35 port 38347 ssh2Apr 30 16:59:10 centos-512mb-sgp2.db-01 sshd[2262]: pamsucceedif(sshd:auth): requirement \"uid >= 1000” not met by user “rooApr 30 16:59:12 centos-512mb-sgp2.db-01 sshd[2262]: Failed password for root from 59.45.175.35 port 38347 ssh2Apr 30 16:59:12 centos-512mb-sgp2.db-01 sshd[2262]: pamsucceed_if(sshd:auth): requirement \"uid >= 1000” not met by user “rooApr 30 16:59:15 centos-512mb-sgp2.db-01 sshd[2262]: Failed password for root from 59.45.175.35 port 38347 ssh2Apr 30 16:59:17 centos-512mb-sgp2.db-01 sshd[2262]: Received disconnect from 59.45.175.35: 11: [preauth]Apr 30 16:59:17 centos-512mb-sgp2.db-01 sshd[2262]: PAM 2 more authentication failures; logname= uid=0 euid=0 tty=ssh ruser=Apr 30 16:59:24 centos-512mb-sgp2.db-01 sshd[2264]: Received disconnect from 59.45.175.88: 11: [preauth]Apr 30 16:59:37 centos-512mb-sgp2.db-01 polkitd[454]: Registered Authentication Agent for unix-process:2266:59184 (system busApr 30 16:59:37 centos-512mb-sgp2.db-01 systemd[1]: Starting OpenVPN Robust And Highly Flexible Tunneling Application On serv– Subject: Unit openvpn@server.conf.service has begun start-up– Defined-By: systemd– Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel– Unit openvpn@server.conf.service has begun starting up.Apr 30 16:59:37 centos-512mb-sgp2.db-01 openvpn[2272]: Options error: In [CMD-LINE]:1: Error opening configuration file: servApr 30 16:59:37 centos-512mb-sgp2.db-01 openvpn[2272]: Use –help for more information.Apr 30 16:59:37 centos-512mb-sgp2.db-01 systemd[1]: openvpn@server.conf.service: main process exited, code=exited, status=1/FApr 30 16:59:37 centos-512mb-sgp2.db-01 systemd[1]: Failed to start OpenVPN Robust And Highly Flexible Tunneling Application– Subject: Unit openvpn@server.conf.service has failed– Defined-By: systemd– Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel– Unit openvpn@server.conf.service has failed.– The result is failed.Apr 30 16:59:37 centos-512mb-sgp2.db-01 systemd[1]: Unit openvpn@server.conf.service entered failed state.Apr 30 16:59:37 centos-512mb-sgp2.db-01 systemd[1]: openvpn@server.conf.service failed.Apr 30 16:59:37 centos-512mb-sgp2.db-01 polkitd[454]: Unregistered Authentication Agent for unix-process:2266:59184 (system bApr 30 16:59:41 centos-512mb-sgp2.db-01 sshd[2277]: pamunix(sshd:auth): authentication failure; logname= uid=0 euid=0 tty=ssApr 30 16:59:41 centos-512mb-sgp2.db-01 sshd[2277]: pamsucceedif(sshd:auth): requirement \"uid >= 1000” not met by user “rooApr 30 16:59:43 centos-512mb-sgp2.db-01 sshd[2277]: Failed password for root from 116.31.116.36 port 48057 ssh2Apr 30 16:59:44 centos-512mb-sgp2.db-01 sshd[2277]: pamsucceedif(sshd:auth): requirement \"uid >= 1000” not met by user “rooApr 30 16:59:46 centos-512mb-sgp2.db-01 sshd[2277]: Failed password for root from 116.31.116.36 port 48057 ssh2Apr 30 16:59:46 centos-512mb-sgp2.db-01 sshd[2277]: pamsucceed_if(sshd:auth): requirement \"uid >= 1000” not met by user “rooApr 30 16:59:48 centos-512mb-sgp2.db-01 sshd[2277]: Failed password for root from 116.31.116.36 port 48057 ssh2Apr 30 16:59:48 centos-512mb-sgp2.db-01 sshd[2277]: Received disconnect from 116.31.116.36: 11: [preauth]Apr 30 16:59:48 centos-512mb-sgp2.db-01 sshd[2277]: PAM 2 more authentication failures; logname= uid=0 euid=0 tty=ssh ruser=lReply Report1jeffreystarin July 16, 2017This is a very faulty tutorial - there is absolutely NO REFERENCE to generating or inserting a ta.key in the tutorial. I don’t know how digital ocean vets the crowd-sourced tutorials but there are many of them that are not accurate.Trying to make heads or tails of shadynagi’s advice also doesn’t work.I generated a secret ta.key in the /etc/openvpn directory and still errors. Are there supposed to be references in the server.conf to BOTH a server.key and ta.key or just or the other.C'mon digital ocean, step in and clear this up please.Thank you.Reply Report0hansen April 30, 2017@christiangelosulitOkay, we need to see more logging because it seems like it just gives a short status.Make sure your OpenVPN configuration file has the log-append parameter.log-append /var/log/openvpn.logThen try to start OpenVPN again and now we should have more logging available in /var/log/openvpn.logReply Report0christiangelosulit April 30, 2017-bash: log-append: command not foundit is not workingReply Report0hansen April 30, 2017You need to add that to your openvpn configuration. It’s not a command you can run.The long log you just posted above says the following error, which is your root cause of the failure:Apr 30 16:59:37 centos-512mb-sgp2.db-01 openvpn[2272]: Options error: In [CMD-LINE]:1: Error opening configuration file: serv*Reply Report0christiangelosulit April 30, 2017ohh sorry sorryi have that in my conf fileenable loglog-append /var/log/myvpn/openvpn.logReply Report1hansen April 30, 2017@christiangelosulitOkay, then go and have a look in /var/log/myvpn/openvpn.log and see if you can find the cause of the error. Otherwise post the last 30-50 lines here.Reply Report1christiangelosulit April 30, 2017errors are all identicalSun Apr 30 16:54:07 2017 WARNING: cannot stat file ‘ta.key’: No such file or directory (errno=2)Options error: –tls-auth fails with 'ta.key’: No such file or directoryOptions error: Please correct these errors.Use –help for more information.Reply Report0christiangelosulit April 30, 2017[root@centos-512mb-sgp2 ~]# log-append /var/log/myvpn/openvpn.log-bash: log-append: command not found[root@centos-512mb-sgp2 ~]# cd /var/log/myvpn[root@centos-512mb-sgp2 myvpn]# lsopenvpn.log[root@centos-512mb-sgp2 myvpn]# log-append openvpn.log-bash: log-append: command not found[root@centos-512mb-sgp2 myvpn]#Reply Report0hansen April 30, 2017@christiangelosulitOkay, if it says Sun Apr 30 16:54:07 2017 WARNING: cannot stat file 'ta.key': No such file or directory (errno=2) then it’s because the file does not exist.You need to point to the correct file containing the key.Reply Report0christiangelosulit April 30, 2017i cant find that key sorry i am new to vpn can you teach me how to make or find that file?Reply Report0hansen April 30, 2017I don’t know what file it is supposed to be.You should either use the one-click-app to install an OpenVPN instance or read through the tutorial:https://www.digitalocean.com/community/tutorials/how-to-setup-and-configure-an-openvpn-server-on-centos-7Reply Report0christiangelosulit April 30, 2017that tutorial is what i read and work with my serverReply Report0hansen April 30, 2017Okay, but at some point you didn’t follow the tutorial exactly. My guess would be that your ta.key is the one called server.key in the tutorial.Reply Report0christiangelosulit April 30, 2017Sun Apr 30 17:44:50 2017 OpenVPN 2.4.1 x86_64-redhat-linux-gnu [Fedora EPEL patched] [SSL (OpenSSL)] [LZO] [LZ4] [EPOLL] [PK$Sun Apr 30 17:44:50 2017 library versions: OpenSSL 1.0.1e-fips 11 Feb 2013, LZO 2.06Sun Apr 30 17:44:50 2017 Diffie-Hellman initialized with 2048 bit keySun Apr 30 17:44:50 2017 Failed to extract curve from certificate (UNDEF), using secp384r1 instead.Sun Apr 30 17:44:50 2017 ECDH curve secp384r1 addedSun Apr 30 17:44:50 2017 Insufficient key material or header text not found in file ‘server.key’ (0/128/256 bytes found/min/$Sun Apr 30 17:44:50 2017 Exiting due to fatal errorSun Apr 30 17:45:41 2017 OpenVPN 2.4.1 x86_64-redhat-linux-gnu [Fedora EPEL patched] [SSL (OpenSSL)] [LZO] [LZ4] [EPOLL] [PK$Sun Apr 30 17:45:41 2017 library versions: OpenSSL 1.0.1e-fips 11 Feb 2013, LZO 2.06Sun Apr 30 17:45:41 2017 Diffie-Hellman initialized with 2048 bit keySun Apr 30 17:45:41 2017 Failed to extract curve from certificate (UNDEF), using secp384r1 instead.Sun Apr 30 17:45:41 2017 ECDH curve secp384r1 addedSun Apr 30 17:45:41 2017 Insufficient key material or header text not found in file 'server.key’ (0/128/256 bytes found/min/$Sun Apr 30 17:45:41 2017 Exiting due to fatal errorReply Report0christiangelosulit April 30, 2017i follow all of the instruction there but i always get the same error message when i try to start openvpn@server.serviceReply Report1arcanevibe July 19, 2018So admittedly this was a little over a year ago, but for anyone else stuck here I thought I’d add my scenario.I have some 5 different clients I am setting up. I had generated a .key/.crt for each of them, and had mistakenly put the client one for my pc in the server.conf file where, I was supposed to have put the one for the D.O. server on which the openVpn service was actually running.After replacing my client cert name with my custom server cert name, the service lifted right off the ground without further issue.Reply Report0hansen April 30, 2017@christiangelosulit You need to follow the tutorial from the beginning again or use the one-click-app where everything is already configured.Reply Report0christiangelosulit April 30, 2017where is the one-click-app?Reply Report0hansen April 30, 2017It seems like DigitalOcean has removed the OpenVPN one-click-app, which you can select when creating a new droplet.I would recommend that you follow the tutorial from the beginning and only change the things that are needed. Leave everything else like the tutorial writes it, then you won’t have any problems.Reply Report0christiangelosulit May 2, 2017problem solve thank you so much!Reply Report0bdspice May 11, 2017Can you Describe here how your problem was solved? As i am also follow that tut and face same problem, tried everything as described and commented,googled and nothing is worked. It will be helpful to othere if you described the error and how fixed itReply Report0shadynagi May 18, 2017#openvpn --genkey --secret ta.keyand make this file like this/etc/openvpn/ta.keyReply Report0angeldsphinx July 22, 2017I found the answer here. It worked.https://unix.stackexchange.com/questions/359428/open-vpn-options-error-tls-auth-fails-with-ta-key-no-such-file-or-directorReply ReportSubmit an AnswerSubmit an answerYou can type !ref in this text area to quickly search our full set of tutorials, documentation & marketplace offerings and insert the link!Sign In to AnswerRelatedquestionSlow connecting speed in China ShanghaiSlow connecting speed in China Shanghai. I have set up a Shadowsocks server, the connecting speed is too slow.questionSlow speed using droplet as VPN for home connection.I currently have a droplet set up as a VPN through OpenVPN. While the server speeds are fine, as shown here: http://www.speedtest.net/result/5660599598.png My connection speed through the VPN are throttled quite badly. VPN disabled:...questionSquid / CentOS 6.9 proxy still detected on whatsmyip.com ?Hello, I have just ran through all the steps in this article https://www.digitalocean.com/community/tutorials/how-to-install-squid-proxy-on-centos-6 and I have been able to get everything working EXCEPT the ability to have whatismyip.com be...questionOpenVPN on VPS (1GB RAM) only getting 50Mbps down on 300Mbps connectionI've got a 1GB VPS running CentOS 7 that I am using for OpenVPN from my home. I have a 300Mbps connection, and without VPN I get anywhere between 300-350Mbps. Using PIA the speed drops a bit, but it's still over 300Mbps. If I used my OpenVPN...Looking for something else?Ask a new question Search for more helpGet our biweekly newsletterSign up for Infrastructure as a Newsletter.Hub for GoodWorking on improving health and education, reducing inequality, and spurring economic growth? We'd like to help.Become a contributorYou get paid; we donate to tech nonprofits.Featured on Community Kubernetes Course Learn Python 3 Machine Learning in Python Getting started with Go Intro to KubernetesDigitalOcean Products Virtual Machines Managed Databases Managed Kubernetes Block Storage Object Storage Marketplace VPC Load BalancersWelcome to the developer cloudDigitalOcean makes it simple to launch in the cloud and scale up as you grow – whether you’re running one virtual machine or ten thousand.Learn MoreDigitalOcean Homepage© DigitalOcean, LLC. All rights reserved.CompanyAboutLeadershipBlogCareersPartnersReferral ProgramPressLegalSecurity & Trust CenterProductsPricingProducts OverviewDropletsKubernetesManaged DatabasesSpacesMarketplaceLoad BalancersBlock StorageAPI DocumentationDocumentationRelease NotesCommunityTutorialsQ&ATools and IntegrationsTagsProduct IdeasWrite for DigitalOceanPresentation GrantsHatch Startup ProgramShop SwagResearch ProgramOpen SourceCode of ConductContactGet SupportTrouble Signing In?SalesReport AbuseSystem Status× Join the CommunityBefore you can do that To complete this action, sign in to your Community account or create a new one.Sign In Sign Up×CommunityTutorialsQuestionsWrite for UsHacktoberfestToolsProductsHomepagePricingProduct OverviewMarketplaceCustomersControl PanelDocumentationContact SupportContact SalesSign In"
